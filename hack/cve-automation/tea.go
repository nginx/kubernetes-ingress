package main

import (
	"fmt"
	"time"
)

const (
	getImagesTimeout = 20 * time.Second
	filterNGINX      = "nginx/*"
)

type model struct {
	filter   string
	images   []image
	selected []string
}

type image struct {
	size string
	id   string
	tags []string
}

func initialModel() (model, error) {
	images, err := getImagesWithFilter(filterNGINX)
	if err != nil {
		return model{}, fmt.Errorf("could not get images with filter %q: %w", filterNGINX, err)
	}

	return model{
		filter: filterNGINX,
		// Our to-do list is a grocery list
		images: images,

		// A map which indicates which choices are selected. We're using
		// the  map like a mathematical set. The keys refer to the indexes
		// of the `choices` slice, above.
		selected: nil,
	}, nil
}
