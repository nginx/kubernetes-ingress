if(typeof jQuery=="undefined")throw new Error("Kube's requires jQuery");(function(e){var t=e.fn.jquery.split(".");if(t[0]==1&&t[1]<8)throw new Error("Kube's requires at least jQuery v1.8")})(jQuery),function(){Function.prototype.inherits=function(e){var t,s,n=function(){};n.prototype=e.prototype,t=new n;for(s in this.prototype)t[s]=this.prototype[s];this.prototype=t,this.prototype.super=e.prototype};var e=function(e,t){t=typeof t=="object"?t:{},this.$element=$(e),this.opts=$.extend(!0,this.defaults,$.fn[this.namespace].options,this.$element.data(),t),this.$target=typeof this.opts.target=="string"?$(this.opts.target):null};e.prototype={getInstance:function(){return this.$element.data("fn."+this.namespace)},hasTarget:function(){return this.$target!==null},callback:function(e){var t=[].slice.call(arguments).splice(1);return this.$element&&(t=this._fireCallback($._data(this.$element[0],"events"),e,this.namespace,t)),this.$target&&(t=this._fireCallback($._data(this.$target[0],"events"),e,this.namespace,t)),this.opts&&this.opts.callbacks&&$.isFunction(this.opts.callbacks[e])?this.opts.callbacks[e].apply(this,t):t},_fireCallback:function(e,t,n,s){if(e&&typeof e[t]!="undefined")for(var i,a,r=e[t].length,o=0;o<r;o++)a=e[t][o].namespace,a===n&&(i=e[t][o].handler.apply(this,s));return typeof i=="undefined"?s:i}},window.Kube=e}(),function(e){e.Plugin={create:function(t,n){return n=typeof n=="undefined"?t.toLowerCase():n,$.fn[n]=function(s,o){var r=Array.prototype.slice.call(arguments,1),a="fn."+n,i=[];return this.each(function(){var l,c=$(this),n=c.data(a);o=typeof s=="object"?s:o,n||(c.data(a,{}),c.data(a,n=new e[t](this,o))),typeof s=="string"&&($.isFunction(n[s])?(l=n[s].apply(n,r),l!==void 0&&i.push(l)):$.error('No such method "'+s+'" for '+t))}),i.length===0||i.length===1?i.length===0?this:i[0]:i},$.fn[n].options={},this},autoload:function(e){for(var s,n=e.split(","),o=n.length,t=0;t<o;t++)s=n[t].toLowerCase().split(",").map(function(e){return e.trim()}).join(","),this.autoloadQueue.push(s);return this},autoloadQueue:[],startAutoload:function(){if(!window.MutationObserver||this.autoloadQueue.length===0)return;var e=this,t=new MutationObserver(function(t){t.forEach(function(t){var n=t.addedNodes;if(n.length===0||n.length===1&&n.nodeType===3)return;e.startAutoloadOnce()})});t.observe(document,{subtree:!0,childList:!0})},startAutoloadOnce:function(){var e=this,t=$("[data-component]").not("[data-loaded]");t.each(function(){var t=$(this),n=t.data("component");e.autoloadQueue.indexOf(n)!==-1&&(t.attr("data-loaded",!0),t[n]())})},watch:function(){e.Plugin.startAutoloadOnce(),e.Plugin.startAutoload()}},$(window).on("load",function(){e.Plugin.watch()})}(Kube),function(e){e.Animation=function(t,n,s){this.namespace="animation",this.defaults={},e.apply(this,arguments),this.effect=n,this.completeCallback=typeof s!="undefined"&&s,this.prefixes=["","-moz-","-o-animation-","-webkit-"],this.queue=[],this.start()},e.Animation.prototype={start:function(){this.isSlideEffect()&&this.setElementHeight(),this.addToQueue(),this.clean(),this.animate()},addToQueue:function(){this.queue.push(this.effect)},setElementHeight:function(){this.$element.height(this.$element.height())},removeElementHeight:function(){this.$element.css("height","")},isSlideEffect:function(){return this.effect==="slideDown"||this.effect==="slideUp"},isHideableEffect:function(){var e=["fadeOut","slideUp","flipOut","zoomOut","slideOutUp","slideOutRight","slideOutLeft"];return $.inArray(this.effect,e)!==-1},isToggleEffect:function(){return this.effect==="show"||this.effect==="hide"},storeHideClasses:function(){this.$element.hasClass("hide-sm")?this.$element.data("hide-sm-class",!0):this.$element.hasClass("hide-md")&&this.$element.data("hide-md-class",!0)},revertHideClasses:function(){this.$element.data("hide-sm-class")?this.$element.addClass("hide-sm").removeData("hide-sm-class"):this.$element.data("hide-md-class")?this.$element.addClass("hide-md").removeData("hide-md-class"):this.$element.addClass("hide")},removeHideClass:function(){this.$element.data("hide-sm-class")?this.$element.removeClass("hide-sm"):this.$element.data("hide-md-class")?this.$element.removeClass("hide-md"):this.$element.removeClass("hide")},animate:function(){if(this.storeHideClasses(),this.isToggleEffect())return this.makeSimpleEffects();this.$element.addClass("kubeanimated"),this.$element.addClass(this.queue[0]),this.removeHideClass();var e=this.queue.length>1?null:this.completeCallback;this.complete("AnimationEnd",$.proxy(this.makeComplete,this),e)},makeSimpleEffects:function(){this.effect==="show"?this.removeHideClass():this.effect==="hide"&&this.revertHideClasses(),typeof this.completeCallback=="function"&&this.completeCallback(this)},makeComplete:function(){this.$element.hasClass(this.queue[0])&&(this.clean(),this.queue.shift(),this.queue.length&&this.animate())},complete:function(e,t,n){var s=e.toLowerCase()+" webkit"+e+" o"+e+" MS"+e;this.$element.one(s,$.proxy(function(){typeof t=="function"&&t(),this.isHideableEffect()&&this.revertHideClasses(),this.isSlideEffect()&&this.removeElementHeight(),typeof n=="function"&&n(this),this.$element.off(s)},this))},clean:function(){this.$element.removeClass("kubeanimated").removeClass(this.queue[0])}},e.Animation.inherits(e)}(Kube),function(e){e.fn.animation=function(t,n){var s="fn.animation";return this.each(function(){var o=e(this),i=o.data(s);o.data(s,{}),o.data(s,i=new Kube.Animation(this,t,n))})},e.fn.animation.options={}}(jQuery),function(e){e.Detect=function(){},e.Detect.prototype={isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},isDesktop:function(){return!/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)},isMobileScreen:function(){return $(window).width()<=768},isTabletScreen:function(){return $(window).width()>768&&$(window).width()<=1024},isDesktopScreen:function(){return $(window).width()>1024}}}(Kube),function(e){e.FormData=function(e){this.opts=e.opts},e.FormData.prototype={set:function(e){this.data=e},get:function(e){return this.formdata=e,this.opts.appendForms&&this.appendForms(),this.opts.appendFields&&this.appendFields(),this.data},appendFields:function(){var e,n,t=$(this.opts.appendFields);if(t.length===0)return;n=this,e="",this.formdata?t.each(function(){n.data.append($(this).attr("name"),$(this).val())}):(t.each(function(){e+="&"+$(this).attr("name")+"="+$(this).val()}),this.data=this.data===""?e.replace(/^&/,""):this.data+e)},appendForms:function(){var e,n,s,t=$(this.opts.appendForms);if(t.length===0)return;this.formdata?(n=this,s=$(this.opts.appendForms).serializeArray(),$.each(s,function(e,t){n.data.append(t.name,t.value)})):(e=t.serialize(),this.data=this.data===""?e:this.data+"&"+e)}}}(Kube),function(e){e.Response=function(){},e.Response.prototype={parse:function(e){if(e==="")return!1;var n,t={};try{t=JSON.parse(e)}catch{return!1}if(t[0]!==void 0)for(n in t)this.parseItem(t[n]);else this.parseItem(t);return t},parseItem:function(e){return e.type==="value"?$.each(e.data,$.proxy(function(e,t){t=t===null||t===!1?0:t,t=t===!0?1:t,$(e).val(t)},this)):e.type==="html"?$.each(e.data,$.proxy(function(e,t){t=t===null||t===!1?"":t,$(e).html(this.stripslashes(t))},this)):e.type==="addClass"?$.each(e.data,function(e,t){$(e).addClass(t)}):e.type==="removeClass"?$.each(e.data,function(e,t){$(e).removeClass(t)}):e.type==="command"?$.each(e.data,function(e,t){$(t)[e]()}):e.type==="animation"?$.each(e.data,function(e,t){t.opts=typeof t.opts=="undefined"?{}:t.opts,$(e).animation(t.name,t.opts)}):e.type==="location"?top.location.href=e.data:e.type==="notify"&&$.notify(e.data),e},stripslashes:function(e){return(e+"").replace(/\0/g,"0").replace(/\\([\\'"])/g,"$1")}}}(Kube),function(e){e.Utils=function(){},e.Utils.prototype={disableBodyScroll:function(){var t,s,o,n=$("html"),e=window.innerWidth;e||(t=document.documentElement.getBoundingClientRect(),e=t.right-Math.abs(t.left)),s=document.body.clientWidth<e,o=this.measureScrollbar(),n.css("overflow","hidden"),s&&n.css("padding-right",o)},measureScrollbar:function(){var n,t=$("body"),e=document.createElement("div");return e.className="scrollbar-measure",t.append(e),n=e.offsetWidth-e.clientWidth,t[0].removeChild(e),n},enableBodyScroll:function(){$("html").css({overflow:"","padding-right":""})}}}(Kube),function(e){e.Message=function(){this.namespace="message",this.defaults={closeSelector:".close",closeEvent:"click",animationOpen:"fadeIn",animationClose:"fadeOut",callbacks:["open","opened","close","closed"]},e.apply(this,arguments),this.start()},e.Message.prototype={start:function(){this.$close=this.$element.find(this.opts.closeSelector),this.$close.on(this.opts.closeEvent+"."+this.namespace,$.proxy(this.close,this)),this.$element.addClass("open")},stop:function(){this.$close.off("."+this.namespace),this.$element.removeClass("open")},open:function(e){e&&e.preventDefault(),this.isOpened()||(this.callback("open"),this.$element.animation(this.opts.animationOpen,$.proxy(this.onOpened,this)))},isOpened:function(){return this.$element.hasClass("open")},onOpened:function(){this.callback("opened"),this.$element.addClass("open")},close:function(e){e&&e.preventDefault(),this.isOpened()&&(this.callback("close"),this.$element.animation(this.opts.animationClose,$.proxy(this.onClosed,this)))},onClosed:function(){this.callback("closed"),this.$element.removeClass("open")}},e.Message.inherits(e),e.Plugin.create("Message"),e.Plugin.autoload("Message")}(Kube),function(e){e.Sticky=function(){this.namespace="sticky",this.defaults={classname:"fixed",offset:0,callbacks:["fixed","unfixed"]},e.apply(this,arguments),this.start()},e.Sticky.prototype={start:function(){this.offsetTop=this.getOffsetTop(),this.load(),$(window).scroll($.proxy(this.load,this))},getOffsetTop:function(){return this.$element.offset().top},load:function(){return this.isFix()?this.fixed():this.unfixed()},isFix:function(){return $(window).scrollTop()>this.offsetTop+this.opts.offset},fixed:function(){this.$element.addClass(this.opts.classname).css("top",this.opts.offset+"px"),this.callback("fixed")},unfixed:function(){this.$element.removeClass(this.opts.classname).css("top",""),this.callback("unfixed")}},e.Sticky.inherits(e),e.Plugin.create("Sticky"),e.Plugin.autoload("Sticky")}(Kube),function(e){e.Toggleme=function(){this.namespace="toggleme",this.defaults={toggleEvent:"click",target:null,text:"",animationOpen:"slideDown",animationClose:"slideUp",callbacks:["open","opened","close","closed"]},e.apply(this,arguments),this.start()},e.Toggleme.prototype={start:function(){if(!this.hasTarget())return;this.$element.on(this.opts.toggleEvent+"."+this.namespace,$.proxy(this.toggle,this))},stop:function(){this.$element.off("."+this.namespace),this.revertText()},toggle:function(e){this.isOpened()?this.close(e):this.open(e)},open:function(e){e&&e.preventDefault(),this.isOpened()||(this.storeText(),this.callback("open"),this.$target.animation("slideDown",$.proxy(this.onOpened,this)),setTimeout($.proxy(this.replaceText,this),100))},close:function(e){e&&e.preventDefault(),this.isOpened()&&(this.callback("close"),this.$target.animation("slideUp",$.proxy(this.onClosed,this)))},isOpened:function(){return this.$target.hasClass("open")},onOpened:function(){this.$target.addClass("open"),this.callback("opened")},onClosed:function(){this.$target.removeClass("open"),this.revertText(),this.callback("closed")},storeText:function(){this.$element.data("replacement-text",this.$element.html())},revertText:function(){var e=this.$element.data("replacement-text");e&&this.$element.html(e),this.$element.removeData("replacement-text")},replaceText:function(){this.opts.text!==""&&this.$element.html(this.opts.text)}},e.Toggleme.inherits(e),e.Plugin.create("Toggleme"),e.Plugin.autoload("Toggleme")}(Kube),function(e){e.Offcanvas=function(){this.namespace="offcanvas",this.defaults={target:null,push:!0,width:"250px",direction:"left",toggleEvent:"click",clickOutside:!0,animationOpen:"slideInLeft",animationClose:"slideOutLeft",callbacks:["open","opened","close","closed"]},e.apply(this,arguments),this.utils=new e.Utils,this.detect=new e.Detect,this.start()},e.Offcanvas.prototype={start:function(){if(!this.hasTarget())return;this.buildTargetWidth(),this.buildAnimationDirection(),this.$close=this.getCloseLink(),this.$element.on(this.opts.toggleEvent+"."+this.namespace,$.proxy(this.toggle,this)),this.$target.addClass("offcanvas")},stop:function(){this.closeAll(),this.$element.off("."+this.namespace),this.$close.off("."+this.namespace),$(document).off("."+this.namespace)},toggle:function(e){this.isOpened()?this.close(e):this.open(e)},buildTargetWidth:function(){this.opts.width=$(window).width()<parseInt(this.opts.width)?"100%":this.opts.width},buildAnimationDirection:function(){this.opts.direction==="right"&&(this.opts.animationOpen="slideInRight",this.opts.animationClose="slideOutRight")},getCloseLink:function(){return this.$target.find(".close")},open:function(e){e&&e.preventDefault(),this.isOpened()||(this.closeAll(),this.callback("open"),this.$target.addClass("offcanvas-"+this.opts.direction),this.$target.css("width",this.opts.width),this.pushBody(),this.$target.animation(this.opts.animationOpen,$.proxy(this.onOpened,this)))},closeAll:function(){var e=$(document).find(".offcanvas");e.length!==0&&(e.each(function(){var e=$(this);e.hasClass("open")&&(e.css("width","").animation("hide"),e.removeClass("open offcanvas-left offcanvas-right"))}),$(document).off("."+this.namespace),$("body").css("left",""))},close:function(e){if(e){var t=$(e.target),n=t[0].tagName==="A"||t[0].tagName==="BUTTON";if(n&&t.closest(".offcanvas").length!==0&&!t.hasClass("close"))return;e.preventDefault()}this.isOpened()&&(this.utils.enableBodyScroll(),this.callback("close"),this.pullBody(),this.$target.animation(this.opts.animationClose,$.proxy(this.onClosed,this)))},isOpened:function(){return this.$target.hasClass("open")},onOpened:function(){this.opts.clickOutside&&$(document).on("click."+this.namespace,$.proxy(this.close,this)),this.detect.isMobileScreen()&&$("html").addClass("no-scroll"),$(document).on("keyup."+this.namespace,$.proxy(this.handleKeyboard,this)),this.$close.on("click."+this.namespace,$.proxy(this.close,this)),this.utils.disableBodyScroll(),this.$target.addClass("open"),this.callback("opened")},onClosed:function(){this.detect.isMobileScreen()&&$("html").removeClass("no-scroll"),this.$target.css("width","").removeClass("offcanvas-"+this.opts.direction),this.$close.off("."+this.namespace),$(document).off("."+this.namespace),this.$target.removeClass("open"),this.callback("closed")},handleKeyboard:function(e){e.which===27&&this.close()},pullBody:function(){this.opts.push&&$("body").animate({left:0},350,function(){$(this).removeClass("offcanvas-push-body")})},pushBody:function(){if(this.opts.push){var e=this.opts.direction==="left"?{left:this.opts.width}:{left:"-"+this.opts.width};$("body").addClass("offcanvas-push-body").animate(e,200)}}},e.Offcanvas.inherits(e),e.Plugin.create("Offcanvas"),e.Plugin.autoload("Offcanvas")}(Kube),function(e){e.Collapse=function(){this.namespace="collapse",this.defaults={target:null,toggle:!0,active:!1,toggleClass:"collapse-toggle",boxClass:"collapse-box",callbacks:["open","opened","close","closed"],hashes:[],currentHash:!1,currentItem:!1},e.apply(this,arguments),this.start()},e.Collapse.prototype={start:function(){this.$items=this.getItems(),this.$items.each($.proxy(this.loadItems,this)),this.$boxes=this.getBoxes(),this.setActiveItem()},getItems:function(){return this.$element.find("."+this.opts.toggleClass)},getBoxes:function(){return this.$element.find("."+this.opts.boxClass)},loadItems:function(e,t){var n=this.getItem(t);n.$el.attr("rel",n.hash),$(n.hash).hasClass("hide")||(this.opts.currentItem=n,this.opts.active=n.hash,n.$el.addClass("active")),n.$el.on("click.collapse",$.proxy(this.toggle,this))},setActiveItem:function(){this.opts.active!==!1&&(this.opts.currentItem=this.getItemBy(this.opts.active),this.opts.active=this.opts.currentItem.hash),this.opts.currentItem!==!1&&(this.addActive(this.opts.currentItem),this.opts.currentItem.$box.removeClass("hide"))},addActive:function(e){e.$box.removeClass("hide").addClass("open"),e.$el.addClass("active"),e.$caret!==!1&&e.$caret.removeClass("down").addClass("up"),e.$parent!==!1&&e.$parent.addClass("active"),this.opts.currentItem=e},removeActive:function(e){e.$box.removeClass("open"),e.$el.removeClass("active"),e.$caret!==!1&&e.$caret.addClass("down").removeClass("up"),e.$parent!==!1&&e.$parent.removeClass("active"),this.opts.currentItem=!1},toggle:function(e){e&&e.preventDefault();var n=$(e.target).closest("."+this.opts.toggleClass).get(0)||e.target,t=this.getItem(n);this.isOpened(t.hash)?this.close(t.hash):this.open(e)},openAll:function(){this.$items.addClass("active"),this.$boxes.addClass("open").removeClass("hide")},open:function(e){if(typeof e=="undefined")return;typeof e=="object"&&e.preventDefault();var s=$(e.target).closest("."+this.opts.toggleClass).get(0)||e.target,n=typeof e=="object"?this.getItem(s):this.getItemBy(e);if(n.$box.hasClass("open"))return;this.opts.toggle&&this.closeAll(),this.callback("open",n),this.addActive(n),n.$box.animation("slideDown",$.proxy(this.onOpened,this))},onOpened:function(){this.callback("opened",this.opts.currentItem)},closeAll:function(){this.$items.removeClass("active").closest("li").removeClass("active"),this.$boxes.removeClass("open").addClass("hide")},close:function(e){var t=this.getItemBy(e);this.callback("close",t),this.opts.currentItem=t,t.$box.animation("slideUp",$.proxy(this.onClosed,this))},onClosed:function(){var e=this.opts.currentItem;this.removeActive(e),this.callback("closed",e)},isOpened:function(e){return $(e).hasClass("open")},getItem:function(e){var n,s,t={};return t.$el=$(e),t.hash=t.$el.attr("href"),t.$box=$(t.hash),n=t.$el.parent(),t.$parent=n[0].tagName==="LI"&&n,s=t.$el.find(".caret"),t.$caret=s.length!==0&&s,t},getItemBy:function(e){var t=typeof e=="number"?this.$items.eq(e-1):this.$element.find('[rel="'+e+'"]');return this.getItem(t)}},e.Collapse.inherits(e),e.Plugin.create("Collapse"),e.Plugin.autoload("Collapse")}(Kube),function(e){e.Dropdown=function(){this.namespace="dropdown",this.defaults={target:null,toggleEvent:"click",height:!1,width:!1,animationOpen:"slideDown",animationClose:"slideUp",caretUp:!1,callbacks:["open","opened","close","closed"]},e.apply(this,arguments),this.utils=new e.Utils,this.detect=new e.Detect,this.start()},e.Dropdown.prototype={start:function(){this.buildClose(),this.buildCaret(),this.detect.isMobile()&&this.buildMobileAnimation(),this.$target.addClass("hide"),this.$element.on(this.opts.toggleEvent+"."+this.namespace,$.proxy(this.toggle,this))},stop:function(){this.$element.off("."+this.namespace),this.$target.removeClass("open").addClass("hide"),this.disableEvents()},buildMobileAnimation:function(){this.opts.animationOpen="fadeIn",this.opts.animationClose="fadeOut"},buildClose:function(){this.$close=this.$target.find(".close")},buildCaret:function(){this.$caret=this.getCaret(),this.buildCaretPosition()},buildCaretPosition:function(){var e=this.$element.offset().top+this.$element.innerHeight()+this.$target.innerHeight();if($(document).height()>e)return;this.opts.caretUp=!0,this.$caret.addClass("up")},getCaret:function(){return this.$element.find(".caret")},toggleCaretOpen:function(){this.opts.caretUp?this.$caret.removeClass("up").addClass("down"):this.$caret.removeClass("down").addClass("up")},toggleCaretClose:function(){this.opts.caretUp?this.$caret.removeClass("down").addClass("up"):this.$caret.removeClass("up").addClass("down")},toggle:function(e){this.isOpened()?this.close(e):this.open(e)},open:function(e){e&&e.preventDefault(),this.callback("open"),$(".dropdown").removeClass("open").addClass("hide"),this.opts.height&&this.$target.css("min-height",this.opts.height+"px"),this.opts.width&&this.$target.width(this.opts.width),this.setPosition(),this.toggleCaretOpen(),this.$target.animation(this.opts.animationOpen,$.proxy(this.onOpened,this))},close:function(e){if(!this.isOpened())return;if(e){if(this.shouldNotBeClosed(e.target))return;e.preventDefault()}this.utils.enableBodyScroll(),this.callback("close"),this.toggleCaretClose(),this.$target.animation(this.opts.animationClose,$.proxy(this.onClosed,this))},onClosed:function(){this.$target.removeClass("open"),this.disableEvents(),this.callback("closed")},onOpened:function(){this.$target.addClass("open"),this.enableEvents(),this.callback("opened")},isOpened:function(){return this.$target.hasClass("open")},enableEvents:function(){this.detect.isDesktop()&&this.$target.on("mouseover."+this.namespace,$.proxy(this.utils.disableBodyScroll,this.utils)).on("mouseout."+this.namespace,$.proxy(this.utils.enableBodyScroll,this.utils)),$(document).on("scroll."+this.namespace,$.proxy(this.setPosition,this)),$(window).on("resize."+this.namespace,$.proxy(this.setPosition,this)),$(document).on("click."+this.namespace+" touchstart."+this.namespace,$.proxy(this.close,this)),$(document).on("keydown."+this.namespace,$.proxy(this.handleKeyboard,this)),this.$target.find('[data-action="dropdown-close"]').on("click."+this.namespace,$.proxy(this.close,this))},disableEvents:function(){this.$target.off("."+this.namespace),$(document).off("."+this.namespace),$(window).off("."+this.namespace)},handleKeyboard:function(e){e.which===27&&this.close(e)},shouldNotBeClosed:function(e){return $(e).attr("data-action")!=="dropdown-close"&&e!==this.$close[0]&&$(e).closest(".dropdown").length!==0},isNavigationFixed:function(){return this.$element.closest(".fixed").length!==0},getPlacement:function(e){return $(document).height()<e?"top":"bottom"},getOffset:function(){return this.isNavigationFixed()?this.$element.position():this.$element.offset()},getPosition:function(){return this.isNavigationFixed()?"fixed":"absolute"},setPosition:function(){if(this.detect.isMobile()){this.$target.addClass("dropdown-mobile");return}var o,t=this.getPosition(),e=this.getOffset(t),n=this.$target.innerHeight(),s=this.$target.innerWidth(),i=this.getPlacement(e.top+n+this.$element.innerHeight()),a=$(window).width()<e.left+s?s-this.$element.innerWidth():0,r=e.left-a;i==="bottom"?(this.isOpened()||this.$caret.removeClass("up").addClass("down"),this.opts.caretUp=!1,o=e.top+this.$element.outerHeight()+1):(this.opts.animationOpen="show",this.opts.animationClose="hide",this.isOpened()||this.$caret.addClass("up").removeClass("down"),this.opts.caretUp=!0,o=e.top-n-1),this.$target.css({position:t,top:o+"px",left:r+"px"})}},e.Dropdown.inherits(e),e.Plugin.create("Dropdown"),e.Plugin.autoload("Dropdown")}(Kube),function(e){e.Tabs=function(){this.namespace="tabs",this.defaults={equals:!1,active:!1,live:!1,hash:!0,callbacks:["init","next","prev","open","opened","close","closed"]},e.apply(this,arguments),this.start()},e.Tabs.prototype={start:function(){this.opts.live!==!1&&this.buildLiveTabs(),this.tabsCollection=[],this.hashesCollection=[],this.currentHash=[],this.currentItem=!1,this.$items=this.getItems(),this.$items.each($.proxy(this.loadItems,this)),this.$tabs=this.getTabs(),this.currentHash=this.getLocationHash(),this.closeAll(),this.setActiveItem(),this.setItemHeight(),this.callback("init")},getTabs:function(){return $(this.tabsCollection).map(function(){return this.toArray()})},getItems:function(){return this.$element.find("a")},loadItems:function(e,t){var n=this.getItem(t);n.$el.attr("rel",n.hash),this.collectItem(n),n.$parent.hasClass("active")&&(this.currentItem=n,this.opts.active=n.hash),n.$el.on("click.tabs",$.proxy(this.open,this))},collectItem:function(e){this.tabsCollection.push(e.$tab),this.hashesCollection.push(e.hash)},buildLiveTabs:function(){var e=$(this.opts.live);if(e.length===0)return;this.$liveTabsList=$("<ul />"),e.each($.proxy(this.buildLiveItem,this)),this.$element.html("").append(this.$liveTabsList)},buildLiveItem:function(e,t){var s,a,n=$(t),o=$("<li />"),i=$("<a />"),r=e+1;n.attr("id",this.getLiveItemId(n,r)),s="#"+n.attr("id"),a=this.getLiveItemTitle(n),i.attr("href",s).attr("rel",s).text(a),o.append(i),this.$liveTabsList.append(o)},getLiveItemId:function(e,t){return typeof e.attr("id")=="undefined"?this.opts.live.replace(".","")+t:e.attr("id")},getLiveItemTitle:function(e){return typeof e.attr("data-title")=="undefined"?e.attr("id"):e.attr("data-title")},setActiveItem:function(){this.currentHash?(this.currentItem=this.getItemBy(this.currentHash),this.opts.active=this.currentHash):this.opts.active===!1&&(this.currentItem=this.getItem(this.$items.first()),this.opts.active=this.currentItem.hash),this.addActive(this.currentItem)},addActive:function(e){e.$parent.addClass("active"),e.$tab.removeClass("hide").addClass("open"),this.currentItem=e},removeActive:function(e){e.$parent.removeClass("active"),e.$tab.addClass("hide").removeClass("open"),this.currentItem=!1},next:function(e){e&&e.preventDefault();var t=this.getItem(this.fetchElement("next"));this.open(t.hash),this.callback("next",t)},prev:function(e){e&&e.preventDefault();var t=this.getItem(this.fetchElement("prev"));this.open(t.hash),this.callback("prev",t)},fetchElement:function(e){var t;if(this.currentItem!==!1){if(t=this.currentItem.$parent[e]().find("a"),t.length===0)return}else t=this.$items[0];return t},open:function(e,t){if(typeof e=="undefined")return;typeof e=="object"&&e.preventDefault();var n=typeof e=="object"?this.getItem(e.target):this.getItemBy(e);this.closeAll(),this.callback("open",n),this.addActive(n),this.pushStateOpen(t,n),this.callback("opened",n)},pushStateOpen:function(e,t){e!==!1&&this.opts.hash!==!1&&history.pushState(!1,!1,t.hash)},close:function(e){var t=this.getItemBy(e);if(!t.$parent.hasClass("active"))return;this.callback("close",t),this.removeActive(t),this.pushStateClose(),this.callback("closed",t)},pushStateClose:function(){this.opts.hash!==!1&&history.pushState(!1,!1," ")},closeAll:function(){this.$tabs.removeClass("open").addClass("hide"),this.$items.parent().removeClass("active")},getItem:function(e){var t={};return t.$el=$(e),t.hash=t.$el.attr("href"),t.$parent=t.$el.parent(),t.$tab=$(t.hash),t},getItemBy:function(e){var t=typeof e=="number"?this.$items.eq(e-1):this.$element.find('[rel="'+e+'"]');return this.getItem(t)},getLocationHash:function(){return this.opts.hash!==!1&&!!this.isHash()&&top.location.hash},isHash:function(){return top.location.hash!==""&&$.inArray(top.location.hash,this.hashesCollection)!==-1},setItemHeight:function(){if(this.opts.equals){var e=this.getItemMaxHeight()+"px";this.$tabs.css("min-height",e)}},getItemMaxHeight:function(){var e=0;return this.$tabs.each(function(){var t=$(this).height();e=t>e?t:e}),e}},e.Tabs.inherits(e),e.Plugin.create("Tabs"),e.Plugin.autoload("Tabs")}(Kube),function(e){e.modalcurrent=null,e.modalwindow=function(t){var n=e.extend({},t,{show:!0}),s=e("<span />");s.modal(n)}}(jQuery),function(e){e.Modal=function(){this.namespace="modal",this.defaults={target:null,show:!1,url:!1,header:!1,width:"600px",height:!1,maxHeight:!1,position:"center",overlay:!0,appendForms:!1,appendFields:!1,animationOpen:"show",animationClose:"hide",callbacks:["open","opened","close","closed"]},e.apply(this,arguments),this.utils=new e.Utils,this.detect=new e.Detect,this.start()},e.Modal.prototype={start:function(){if(!this.hasTarget())return;this.opts.show?this.load():this.$element.on("click."+this.namespace,$.proxy(this.load,this))},buildModal:function(){this.$modal=this.$target.find(".modal"),this.$header=this.$target.find(".modal-header"),this.$close=this.$target.find(".close"),this.$body=this.$target.find(".modal-body")},buildOverlay:function(){if(this.opts.overlay===!1)return;$("#modal-overlay").length!==0?this.$overlay=$("#modal-overlay"):(this.$overlay=$('<div id="modal-overlay">').addClass("hide"),$("body").prepend(this.$overlay)),this.$overlay.addClass("overlay")},buildHeader:function(){this.opts.header&&this.$header.html(this.opts.header)},load:function(e){this.buildModal(),this.buildOverlay(),this.buildHeader(),this.opts.url?this.buildContent():this.open(e)},open:function(e){if(e&&e.preventDefault(),this.isOpened())return;this.detect.isMobile()&&(this.opts.width="96%"),this.opts.overlay&&this.$overlay.removeClass("hide"),this.$target.removeClass("hide"),this.$modal.removeClass("hide"),this.enableEvents(),this.findActions(),this.resize(),$(window).on("resize."+this.namespace,$.proxy(this.resize,this)),this.detect.isDesktop()&&this.utils.disableBodyScroll(),this.$modal.find("input[type=text],input[type=url],input[type=email]").on("keydown."+this.namespace,$.proxy(this.handleEnter,this)),this.callback("open"),this.$modal.animation(this.opts.animationOpen,$.proxy(this.onOpened,this))},close:function(e){if(!this.$modal||!this.isOpened())return;if(e){if(this.shouldNotBeClosed(e.target))return;e.preventDefault()}this.callback("close"),this.disableEvents(),this.$modal.animation(this.opts.animationClose,$.proxy(this.onClosed,this)),this.opts.overlay&&this.$overlay.animation(this.opts.animationClose)},onOpened:function(){this.$modal.addClass("open"),this.callback("opened"),$.modalcurrent=this},onClosed:function(){this.callback("closed"),this.$target.addClass("hide"),this.$modal.removeClass("open"),this.detect.isDesktop()&&this.utils.enableBodyScroll(),this.$body.css("height",""),$.modalcurrent=null},isOpened:function(){return this.$modal.hasClass("open")},getData:function(){var t=new e.FormData(this);return t.set(""),t.get()},buildContent:function(){$.ajax({url:this.opts.url+"?"+(new Date).getTime(),cache:!1,type:"post",data:this.getData(),success:$.proxy(function(e){this.$body.html(e),this.open()},this)})},buildWidth:function(){var e=this.opts.width,t="2%",n="2%",s=e.match(/%$/);parseInt(this.opts.width)>$(window).width()&&!s?e="96%":s||(t="16px",n="16px"),this.$modal.css({width:e,"margin-top":t,"margin-bottom":n})},buildPosition:function(){if(this.opts.position!=="center")return;var t=$(window).height(),n=this.$modal.outerHeight(),e=t/2-n/2+"px";this.detect.isMobile()?e="2%":n>t&&(e="16px"),this.$modal.css("margin-top",e)},buildHeight:function(){var t,n,s,o,e=$(window).height();this.opts.maxHeight?(t=parseInt(this.$body.css("padding-top"))+parseInt(this.$body.css("padding-bottom")),n=parseInt(this.$modal.css("margin-top"))+parseInt(this.$modal.css("margin-bottom")),s=e-this.$header.innerHeight()-t-n,this.$body.height(s)):this.opts.height!==!1&&this.$body.css("height",this.opts.height),o=this.$modal.outerHeight(),o>e&&(this.opts.animationOpen="show",this.opts.animationClose="hide")},resize:function(){this.buildWidth(),this.buildPosition(),this.buildHeight()},enableEvents:function(){this.$close.on("click."+this.namespace,$.proxy(this.close,this)),$(document).on("keyup."+this.namespace,$.proxy(this.handleEscape,this)),this.$target.on("click."+this.namespace,$.proxy(this.close,this))},disableEvents:function(){this.$close.off("."+this.namespace),$(document).off("."+this.namespace),this.$target.off("."+this.namespace),$(window).off("."+this.namespace)},findActions:function(){this.$body.find('[data-action="modal-close"]').on("mousedown."+this.namespace,$.proxy(this.close,this))},setHeader:function(e){this.$header.html(e)},setContent:function(e){this.$body.html(e)},setWidth:function(e){this.opts.width=e,this.resize()},getModal:function(){return this.$modal},getBody:function(){return this.$body},getHeader:function(){return this.$header},handleEnter:function(e){e.which===13&&(e.preventDefault(),this.close(!1))},handleEscape:function(e){return e.which!==27||this.close(!1)},shouldNotBeClosed:function(e){return $(e).attr("data-action")!=="modal-close"&&e!==this.$close[0]&&$(e).closest(".modal").length!==0}},e.Modal.inherits(e),e.Plugin.create("Modal"),e.Plugin.autoload("Modal")}(Kube)