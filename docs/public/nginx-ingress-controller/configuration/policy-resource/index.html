<!DOCTYPE html>
<html lang="en-us">

<head>  


<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Policy resources | NGINX Ingress Controller</title>






<link rel="canonical" href="https://docs.nginx.com/nginx-ingress-controller/configuration/policy-resource/">







<meta property="article:publisher" content="https://www.facebook.com/nginxinc" />
<meta property="og:image" content="https://docs.nginx.com/images/icons/NGINX-Docs-new-docs-dark-1200x630.png" />
<meta property="og:image:width" content="500" />
<meta property="og:image:height" content="300" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:description" content="" />
<meta name="twitter:title" content="Policy resources" />
<meta name="twitter:site" content="@nginx" />
<meta name="twitter:image" content="https://docs.nginx.com/images/icons/NGINX-Docs-new-docs-dark-1200x630.png" />
<meta name="twitter:creator" content="@nginx" />




<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline'
    https://consent.trustarc.com/ https://mktg.tags.f5.com/basic/prod/utag.sync.js https://static.cloud.coveo.com/ https://*.f5.com/
    https://*.netlify.app https://gist.github.com
    https://tag.demandbase.com/pscSDsz4.min.js
    https://munchkin.brightfunnel.com/js/build/bf-munchkin.min.js
    https://www.googletagmanager.com/gtm.js
    https://www.google-analytics.com/
    https://www.google-analytics.com/analytics.js
    https://www.google-analytics.com/plugins/ua/linkid.js
    https://cdn.bizible.com/scripts/bizible.js
    https://cdn.bizible.com/xdc.js
    https://f5networksglobalprod.122.2o7.net/
    https://f5networksnginxdocs.122.2o7.net/
    ;
    worker-src 'self' blob:">



<meta property="environment" type="production" />
<meta property="buildtype" type="webdocs" />
<meta property="isServer" type="false" />


<meta name="product" content="NGINX Ingress Controller">
<meta name="version" content="">
<meta name="doc_type" content="Manual">

<link rel="shortcut icon" type="image/x-icon" href="https://docs.nginx.com/images/favicon-48x48.ico">











<link href="/nginx-ingress-controller/fontawesome/css/all.min.4a71f958af9b67180f1ece38b96217f8b2c9009f7fd8f90f299e508808fa4daf3ac3e7ec6f64e47267d1c955f7a419cc15c57ba103c9925f507af4825abdd6e8.css" integrity="sha512-SnH5WK&#43;bZxgPHs44uWIX&#43;LLJAJ9/2PkPKZ5QiAj6Ta86w&#43;fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" rel="stylesheet" type="text/css">


<link href="/nginx-ingress-controller/fontawesome/css/v4-font-face.min.5870089ba06cf03e9721f87919eaf15c961a65e071845949ed2da58c5bfbd18a714c5dab2c155f0455ebcd2f45bfd598a5e47ae19976e7aa3a51e22914eac1b6.css" integrity="sha512-WHAIm6Bs8D6XIfh5GerxXJYaZeBxhFlJ7S2ljFv70YpxTF2rLBVfBFXrzS9Fv9WYpeR64Zl256o6UeIpFOrBtg==" rel="stylesheet" type="text/css">


<link href="/nginx-ingress-controller/fontawesome/css/v5-font-face.min.81bdf1c9f8ff16b1eda613d52d868a059f16c8c6045c3d7e0a0b771622a11666cdd94b8ea62b5edb0d4b826c3a3737ec3663065fe05b56b6b871e57de73f556b.css" integrity="sha512-gb3xyfj/FrHtphPVLYaKBZ8WyMYEXD1&#43;Cgt3FiKhFmbN2UuOpite2w1Lgmw6NzfsNmMGX&#43;BbVra4ceV95z9Vaw==" rel="stylesheet" type="text/css">

  

<link href="/nginx-ingress-controller/css/bootstrap.min.3f9320327d6304dd356ac060534cfad10938431897a3cebec2515a84aaec41fdfb73d72ba39d7b5b35523cf575b432b3864bb6889d855602faef01b4dd21a734.css" integrity="sha512-P5MgMn1jBN01asBgU0z60Qk4QxiXo86&#43;wlFahKrsQf37c9cro517WzVSPPV1tDKzhku2iJ2FVgL67wG03SGnNA==" rel="stylesheet" type="text/css">



<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.10104/0/css/CoveoFullSearch.min.css" integrity="sha512-9/A9yVCU4GS6/iIwTRJKnan4Hf8gDKj3anwItN9QCsU8SixaT5xkjjWsZ/iq0TWaizhtqOLacadXJfxHlwYCcA==" crossorigin="anonymous" />


<link href="/nginx-ingress-controller/css/docs-nginx-com/nginx-site-header.min.80b10ed49ecfad93607ee771acca88d13dc958e6eecc642af3aa2b170c86b8dcce442e7b86c3e5298c95b0ab2b053a71074c2f15c28266c3a2c502275415b3a7.css" rel="stylesheet" type="text/css">


<link href="/nginx-ingress-controller/css/docs-nginx-com/style.min.2cd4748c438c49d012a5fdc6b98770223c4875fe0f89517b17423b6a5328af4d93d9d772207bfc51d9449781281e1eb8707dcc2f7467e6e24330c9b8c7c5f734.css" rel="stylesheet" type="text/css">


<link href="/nginx-ingress-controller/css/bootstrap-docs.min.8a70c94c72e3783cecd631bc1705c7843b2fdef99f1549f0bf7f774a4083173ee25974413a8206c2340c0fee9bb7a07acd41d41c78ae2280c96a2ce0faca2847.css" rel="stylesheet" type="text/css">



<link href="/nginx-ingress-controller/css/coveo.min.fce7d4df31de99e4f86510a90915820f236b8dcd02be030b27529af7ff10189f807c78cedacb91afa9d07f310a172c6046b1921832f199b9158898a7f74fa117.css" rel="stylesheet" type="text/css">



<link href="/nginx-ingress-controller/css/f5-hugo.min.d668cd51e42f94f8d4fb9a81de0dcf6329a121173422b5695c37a707ac9df6ee4f90ee81b4dbecd797731a81f593ef80d85471bda37cb9af5ce617482982aa35.css" rel="stylesheet" type="text/css">





<link href="/nginx-ingress-controller/css/highlight.min.fe5647c4b67f4b3fcf0ea60b483479d567ba1b05ee6e816439207edfa3d310dbee79536278c67d89c1db5da275bde962a10163da375f05bd19743e2a80e1ad02.css" rel="stylesheet" type="text/css">







      
<script async="async" src="https://consent.trustarc.com/notice?domain=f5.com&c=teconsent&js=nj&noticeType=bb&text=true&gtm=1" crossorigin=""></script>



<script src="https://mktg.tags.f5.com/basic/prod/utag.sync.js"></script> 







<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-K5HG9JT');</script>

</head>

<body>
   
 
<script type="text/javascript"> 
    (function(a,b,c,d) { 
        a='//mktg.tags.f5.com/basic/prod/utag.js'; 
        b=document;c='script';d=b.createElement(c);d.src=a; 
        d.type='text/java'+c;d.async=true; 
        a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a)})(); 
</script> 
  

  <header>
    
<div class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar navbar-fixed-top">
  <div class="container-fluid flex-md-row flex-column">
    <a class="navbar-brand mr-0 mr-md-2" href="/" aria-label="NGINX Docs">
      <img class="navbar-img" src="https://docs.nginx.com/images/icons/NGINX-Docs-horiz-white-type.svg" alt="NGINX Docs">
    </a>
    
      <div class="navbar navbar-nav">
            
        <div id="searchbox">
          
          <div class="CoveoSearchbox" data-placeholder='Search NGINX Docs...'></div>
        </div>
      </div>
    
    

    <ul class="navbar navbar-nav">
        <li class="nav-item-explore active">
          <button class="button navbar-button"><a href="https://www.f5.com/products" alt="Explore all products on f5.com" target="_blank">Explore All Products</a></button>
        </li>
    </ul>
  </div>
</div>


  </header>

  
    
    <nav aria-label="breadcrumb" class="breadcrumb navbar">
    <div class="nav flex-md-row">
        <ol class="breadcrumb">
            <li><a href="/" alt="NGINX Docs Home">Home</a></li>

            
            
            
            
                
            
            
                
            
            
                
            
            
            
                <li><i class="fas fa-chevron-right"></i><a href="/nginx-ingress-controller/">NGINX Ingress Controller</a></a><i class="fas fa-chevron-right"></i></li>
                
            
                <li><a href="/nginx-ingress-controller/configuration/">Configuration</a><i class="fas fa-chevron-right"></i></li>
                
            
                Policy resources
        </ol>
    </div>
</nav>

  
    
  

  <div class="main container-fluid min-page-height" data-menu-id="/nginx-ingress-controller/configuration/policy-resource/">
    
    
<div class="row" style="max-width: calc(100% + 30px) !important; flex-wrap: nowrap;">
  <nav class="sidenav overflow-auto col-md-3 d-none d-xl-block d-print-none align-top" style="width: 25%;">
    


<div id="sidebar-wrapper">

    <div id="sidebar" class="sidebar" aria-label="Sidebar navigation">
        <button id="sidebar-toggle-button" title="Toggle sidebar navigation" role="button" aria-controls="sidebar-content">
            <i class="fa fa-chevron-right sidebar-visible-collapsed"></i>
            <i class="fa fa-chevron-left sidebar-visible-expanded"></i>
        </button>
        <div id="sidebar-content">
            <h3>
                <a class="sidebar-title" href="https://docs.nginx.com/nginx-ingress-controller/" alt="NGINX Ingress Controller"><img
                        class="card-img-top" src="https://docs.nginx.com/images/icons/NGINX-Ingress-Controller-product-icon.svg"
                        alt="NGINX Ingress Controller">
                    NGINX Ingress Controller</a>
            </h3>
            <ul>
            
            
        
            
        
            
        
            
        
            
        
            
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                <a data-menu-id="/nginx-ingress-controller/overview/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#overview--overview"
                                    aria-controls="overview--overview">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Overview</a>
                            </li>
                        </div>
                        <div id="overview--overview" class="accordion-body collapse">
                            <div class="accordion-inner">
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/overview/about/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/overview/about/">About</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/overview/design/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/overview/design/">The design of NGINX Ingress Controller</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/overview/nginx-plus/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/overview/nginx-plus/">Extensibility with NGINX Plus</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/overview/product-telemetry/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/overview/product-telemetry/">Product telemetry</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            </div>
                        </div>
                    </div>
                </div>
                
            
                
                
                <ul class="sidebar-reg-padding">
                    <div class="accordion" id="accordion1">
                        <div class="accordion-group">
                            <div class="accordion-heading">
                                <ul>
                                    <li class="nginx-toc-link l1">
                                        <a data-menu-id="/nginx-ingress-controller/technical-specifications/"
                                            href="https://docs.nginx.com/nginx-ingress-controller/technical-specifications/">Technical specifications</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </ul>
                
                
            
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                <a data-menu-id="/nginx-ingress-controller/installation/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#installation--installation"
                                    aria-controls="installation--installation">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Installation</a>
                            </li>
                        </div>
                        <div id="installation--installation" class="accordion-body collapse">
                            <div class="accordion-inner">
                            
                            
                                
                                <div class="accordion" id="Accordion2">
                                    <div class="sidebar-l1-padding">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/installation/installing-nic/" class="accordion-toggle"
                                                            aria-expanded="false" data-toggle="collapse"
                                                            href="#installation--installation--install-nginx-ingress-controller">
                                                            <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                class="fa fa-2xs fa-fw fa-chevron-down"></i>Install NGINX Ingress Controller</a>
                                                    </li>
                                                <ul>
                                            </div>
                                            <div id="installation--installation--install-nginx-ingress-controller" class="accordion-body collapse leaf">
                                                <div class="accordion-inner">

                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/installation/installing-nic/installation-with-helm/" href="https://docs.nginx.com/nginx-ingress-controller/installation/installing-nic/installation-with-helm/">Installation with Helm</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/installation/installing-nic/installation-with-manifests/" href="https://docs.nginx.com/nginx-ingress-controller/installation/installing-nic/installation-with-manifests/">Installation with Manifests</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/installation/installing-nic/installation-with-operator/" href="https://docs.nginx.com/nginx-ingress-controller/installation/installing-nic/installation-with-operator/">Installation with NGINX Ingress Operator</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/installation/build-nginx-ingress-controller/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/installation/build-nginx-ingress-controller/">Build NGINX Ingress Controller</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <div class="accordion" id="Accordion2">
                                    <div class="sidebar-l1-padding">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/installation/nic-images/" class="accordion-toggle"
                                                            aria-expanded="false" data-toggle="collapse"
                                                            href="#installation--installation--nginx-ingress-controller-images">
                                                            <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                class="fa fa-2xs fa-fw fa-chevron-down"></i>NGINX Ingress Controller images</a>
                                                    </li>
                                                <ul>
                                            </div>
                                            <div id="installation--installation--nginx-ingress-controller-images" class="accordion-body collapse leaf">
                                                <div class="accordion-inner">

                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/installation/nic-images/get-registry-image/" href="https://docs.nginx.com/nginx-ingress-controller/installation/nic-images/get-registry-image/">Get NGINX Ingress Controller from the F5 Registry</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/installation/nic-images/get-image-using-jwt/" href="https://docs.nginx.com/nginx-ingress-controller/installation/nic-images/get-image-using-jwt/">Get the NGINX Ingress Controller image with JWT</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/installation/nic-images/use-aws-image/" href="https://docs.nginx.com/nginx-ingress-controller/installation/nic-images/use-aws-image/">Use the AWS Marketplace NGINX Ingress Controller image</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/installation/nic-images/use-gcp-image/" href="https://docs.nginx.com/nginx-ingress-controller/installation/nic-images/use-gcp-image/">Use the GCP Marketplace NGINX Ingress Controller image</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/installation/run-multiple-ingress-controllers/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/installation/run-multiple-ingress-controllers/">Run multiple NGINX Ingress Controllers</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/installation/ingress-nginx/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/installation/ingress-nginx/">Migrate from Ingress-NGINX Controller to NGINX Ingress Controller</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <div class="accordion" id="Accordion2">
                                    <div class="sidebar-l1-padding">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/installation/integrations/" class="accordion-toggle"
                                                            aria-expanded="false" data-toggle="collapse"
                                                            href="#installation--installation--integrations">
                                                            <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                class="fa fa-2xs fa-fw fa-chevron-down"></i>Integrations</a>
                                                    </li>
                                                <ul>
                                            </div>
                                            <div id="installation--installation--integrations" class="accordion-body collapse leaf">
                                                <div class="accordion-inner">

                                                
                                                    
                                                    
                                                    <div class="accordion" id="Accordion3">
                                                        <div class="sidebar-l2-padding">
                                                            <div class="accordion-group sidebar-il-border">
                                                                <div class="accordion-heading">
                                                                    <ul>
                                                                        <li class="nginx-toc-link l2">
                                                                            <a data-menu-id="/nginx-ingress-controller/installation/integrations/app-protect-waf/" class="accordion-toggle"
                                                                                aria-expanded="false" data-toggle="collapse"
                                                                                href="#installation--integrations--nginx-app-protect-waf">
                                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>NGINX App Protect WAF</a>
                                                                        </li>
                                                                    <ul>
                                                                </div>
                                                                <div id="installation--integrations--nginx-app-protect-waf" class="accordion-body collapse leaf">
                                                                    <div class="accordion-inner">
                                                                    
                                                                    
                                                                    
                                                                        <ul class="sidebar-l2-padding">
                                                                            <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                <a data-menu-id="/nginx-ingress-controller/installation/integrations/app-protect-waf/installation/"
                                                                                    href="https://docs.nginx.com/nginx-ingress-controller/installation/integrations/app-protect-waf/installation/">Build NGINX Ingress Controller with NGINX App Protect WAF</a>
                                                                            </li>
                                                                        </ul>
                                                                    
                                                                    
                                                                        
                                                                    
                                                                    
                                                                        <ul class="sidebar-l2-padding">
                                                                            <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                <a data-menu-id="/nginx-ingress-controller/installation/integrations/app-protect-waf/configuration/"
                                                                                    href="https://docs.nginx.com/nginx-ingress-controller/installation/integrations/app-protect-waf/configuration/">Configuration</a>
                                                                            </li>
                                                                        </ul>
                                                                    
                                                                    
                                                                        
                                                                    
                                                                    
                                                                        <ul class="sidebar-l2-padding">
                                                                            <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                <a data-menu-id="/nginx-ingress-controller/installation/integrations/app-protect-waf/compile-waf-policies/"
                                                                                    href="https://docs.nginx.com/nginx-ingress-controller/installation/integrations/app-protect-waf/compile-waf-policies/">Compile NGINX App Protect WAF policies using NGINX Instance Manager</a>
                                                                            </li>
                                                                        </ul>
                                                                    
                                                                    
                                                                        
                                                                    
                                                                    
                                                                        <ul class="sidebar-l2-padding">
                                                                            <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                <a data-menu-id="/nginx-ingress-controller/installation/integrations/app-protect-waf/troubleshoot-app-protect-waf/"
                                                                                    href="https://docs.nginx.com/nginx-ingress-controller/installation/integrations/app-protect-waf/troubleshoot-app-protect-waf/">Troubleshoot NGINX App Protect WAF</a>
                                                                            </li>
                                                                        </ul>
                                                                    
                                                                    
                                                                        
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                
                                                    
                                                    
                                                    <div class="accordion" id="Accordion3">
                                                        <div class="sidebar-l2-padding">
                                                            <div class="accordion-group sidebar-il-border">
                                                                <div class="accordion-heading">
                                                                    <ul>
                                                                        <li class="nginx-toc-link l2">
                                                                            <a data-menu-id="/nginx-ingress-controller/installation/integrations/app-protect-waf-v5/" class="accordion-toggle"
                                                                                aria-expanded="false" data-toggle="collapse"
                                                                                href="#installation--integrations--nginx-app-protect-waf-v5">
                                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>NGINX App Protect WAF v5</a>
                                                                        </li>
                                                                    <ul>
                                                                </div>
                                                                <div id="installation--integrations--nginx-app-protect-waf-v5" class="accordion-body collapse leaf">
                                                                    <div class="accordion-inner">
                                                                    
                                                                    
                                                                    
                                                                        <ul class="sidebar-l2-padding">
                                                                            <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                <a data-menu-id="/nginx-ingress-controller/installation/integrations/app-protect-waf-v5/installation/"
                                                                                    href="https://docs.nginx.com/nginx-ingress-controller/installation/integrations/app-protect-waf-v5/installation/">Build NGINX Ingress Controller with NGINX App Protect WAF v5</a>
                                                                            </li>
                                                                        </ul>
                                                                    
                                                                    
                                                                        
                                                                    
                                                                    
                                                                        <ul class="sidebar-l2-padding">
                                                                            <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                <a data-menu-id="/nginx-ingress-controller/installation/integrations/app-protect-waf-v5/configuration/"
                                                                                    href="https://docs.nginx.com/nginx-ingress-controller/installation/integrations/app-protect-waf-v5/configuration/">Configuration</a>
                                                                            </li>
                                                                        </ul>
                                                                    
                                                                    
                                                                        
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                
                                                    
                                                    
                                                    <div class="accordion" id="Accordion3">
                                                        <div class="sidebar-l2-padding">
                                                            <div class="accordion-group sidebar-il-border">
                                                                <div class="accordion-heading">
                                                                    <ul>
                                                                        <li class="nginx-toc-link l2">
                                                                            <a data-menu-id="/nginx-ingress-controller/installation/integrations/app-protect-dos/" class="accordion-toggle"
                                                                                aria-expanded="false" data-toggle="collapse"
                                                                                href="#installation--integrations--nginx-app-protect-dos">
                                                                                <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                                    class="fa fa-2xs fa-fw fa-chevron-down"></i>NGINX App Protect DoS</a>
                                                                        </li>
                                                                    <ul>
                                                                </div>
                                                                <div id="installation--integrations--nginx-app-protect-dos" class="accordion-body collapse leaf">
                                                                    <div class="accordion-inner">
                                                                    
                                                                    
                                                                    
                                                                        <ul class="sidebar-l2-padding">
                                                                            <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                <a data-menu-id="/nginx-ingress-controller/installation/integrations/app-protect-dos/installation/"
                                                                                    href="https://docs.nginx.com/nginx-ingress-controller/installation/integrations/app-protect-dos/installation/">Build NGINX Ingress Controller with NGINX App Protect DoS</a>
                                                                            </li>
                                                                        </ul>
                                                                    
                                                                    
                                                                        
                                                                    
                                                                    
                                                                        <ul class="sidebar-l2-padding">
                                                                            <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                <a data-menu-id="/nginx-ingress-controller/installation/integrations/app-protect-dos/configuration/"
                                                                                    href="https://docs.nginx.com/nginx-ingress-controller/installation/integrations/app-protect-dos/configuration/">Configuration</a>
                                                                            </li>
                                                                        </ul>
                                                                    
                                                                    
                                                                        
                                                                    
                                                                    
                                                                        <ul class="sidebar-l2-padding">
                                                                            <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                <a data-menu-id="/nginx-ingress-controller/installation/integrations/app-protect-dos/dos-protected/"
                                                                                    href="https://docs.nginx.com/nginx-ingress-controller/installation/integrations/app-protect-dos/dos-protected/">DoS protected resource specification</a>
                                                                            </li>
                                                                        </ul>
                                                                    
                                                                    
                                                                        
                                                                    
                                                                    
                                                                        <ul class="sidebar-l2-padding">
                                                                            <li class="nginx-toc-link l3 sidebar-il-border ">
                                                                                <a data-menu-id="/nginx-ingress-controller/installation/integrations/app-protect-dos/troubleshoot-app-protect-dos/"
                                                                                    href="https://docs.nginx.com/nginx-ingress-controller/installation/integrations/app-protect-dos/troubleshoot-app-protect-dos/">Troubleshoot NGINX App Protect DoS</a>
                                                                            </li>
                                                                        </ul>
                                                                    
                                                                    
                                                                        
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/installation/integrations/f5-ingresslink/" href="https://docs.nginx.com/nginx-ingress-controller/installation/integrations/f5-ingresslink/">F5 BIG-IP</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/installation/integrations/opentracing/" href="https://docs.nginx.com/nginx-ingress-controller/installation/integrations/opentracing/">OpenTracing</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            
                            </div>
                        </div>
                    </div>
                </div>
                
            
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                <a data-menu-id="/nginx-ingress-controller/configuration/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#configuration--configuration"
                                    aria-controls="configuration--configuration">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Configuration</a>
                            </li>
                        </div>
                        <div id="configuration--configuration" class="accordion-body collapse">
                            <div class="accordion-inner">
                            
                            
                                
                                <div class="accordion" id="Accordion2">
                                    <div class="sidebar-l1-padding">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/configuration/global-configuration/" class="accordion-toggle"
                                                            aria-expanded="false" data-toggle="collapse"
                                                            href="#configuration--configuration--global-configuration">
                                                            <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                class="fa fa-2xs fa-fw fa-chevron-down"></i>Global configuration</a>
                                                    </li>
                                                <ul>
                                            </div>
                                            <div id="configuration--configuration--global-configuration" class="accordion-body collapse leaf">
                                                <div class="accordion-inner">

                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/configuration/global-configuration/command-line-arguments/" href="https://docs.nginx.com/nginx-ingress-controller/configuration/global-configuration/command-line-arguments/">Command-line arguments</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/configuration/global-configuration/globalconfiguration-resource/" href="https://docs.nginx.com/nginx-ingress-controller/configuration/global-configuration/globalconfiguration-resource/">GlobalConfiguration resource</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/configuration/global-configuration/configmap-resource/" href="https://docs.nginx.com/nginx-ingress-controller/configuration/global-configuration/configmap-resource/">ConfigMap resources</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/configuration/global-configuration/custom-templates/" href="https://docs.nginx.com/nginx-ingress-controller/configuration/global-configuration/custom-templates/">Custom templates</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/configuration/global-configuration/reporting-resources-status/" href="https://docs.nginx.com/nginx-ingress-controller/configuration/global-configuration/reporting-resources-status/">Reporting resource status</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            
                            
                                
                                <div class="accordion" id="Accordion2">
                                    <div class="sidebar-l1-padding">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/configuration/ingress-resources/" class="accordion-toggle"
                                                            aria-expanded="false" data-toggle="collapse"
                                                            href="#configuration--configuration--ingress-resources">
                                                            <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                                                class="fa fa-2xs fa-fw fa-chevron-down"></i>Ingress resources</a>
                                                    </li>
                                                <ul>
                                            </div>
                                            <div id="configuration--configuration--ingress-resources" class="accordion-body collapse leaf">
                                                <div class="accordion-inner">

                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/configuration/ingress-resources/basic-configuration/" href="https://docs.nginx.com/nginx-ingress-controller/configuration/ingress-resources/basic-configuration/">Basic configuration</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/configuration/ingress-resources/advanced-configuration-with-annotations/" href="https://docs.nginx.com/nginx-ingress-controller/configuration/ingress-resources/advanced-configuration-with-annotations/">Advanced configuration with Annotations</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/configuration/ingress-resources/custom-annotations/" href="https://docs.nginx.com/nginx-ingress-controller/configuration/ingress-resources/custom-annotations/">Custom annotations</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/configuration/ingress-resources/advanced-configuration-with-snippets/" href="https://docs.nginx.com/nginx-ingress-controller/configuration/ingress-resources/advanced-configuration-with-snippets/">Advanced configuration with Snippets</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                    
                                                    
                                                    <ul class="sidebar-l2-padding">
                                                        <li class="nginx-toc-link l3 sidebar-il-border">
                                                            <a data-menu-id="/nginx-ingress-controller/configuration/ingress-resources/cross-namespace-configuration/" href="https://docs.nginx.com/nginx-ingress-controller/configuration/ingress-resources/cross-namespace-configuration/">Cross-namespace configuration</a>
                                                        </li>
                                                    </ul>
                                                    
                                                    
                                                
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/configuration/security/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/configuration/security/">Security recommendations</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/configuration/configuration-examples/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/configuration/configuration-examples/">Configuration examples</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/configuration/policy-resource/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/configuration/policy-resource/">Policy resources</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/configuration/transportserver-resource/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/configuration/transportserver-resource/">TransportServer resources</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/configuration/virtualserver-and-virtualserverroute-resources/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/configuration/virtualserver-and-virtualserverroute-resources/">VirtualServer and VirtualServerRoute resources</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/configuration/host-and-listener-collisions/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/configuration/host-and-listener-collisions/">Host and Listener collisions</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            </div>
                        </div>
                    </div>
                </div>
                
            
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                <a data-menu-id="/nginx-ingress-controller/logging-and-monitoring/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#logging-and-monitoring--logging-and-monitoring"
                                    aria-controls="logging-and-monitoring--logging-and-monitoring">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Logging And Monitoring</a>
                            </li>
                        </div>
                        <div id="logging-and-monitoring--logging-and-monitoring" class="accordion-body collapse">
                            <div class="accordion-inner">
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/logging-and-monitoring/logging/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/logging-and-monitoring/logging/">Logging</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/logging-and-monitoring/status-page/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/logging-and-monitoring/status-page/">Status Page</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/logging-and-monitoring/prometheus/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/logging-and-monitoring/prometheus/">Prometheus</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/logging-and-monitoring/service-insight/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/logging-and-monitoring/service-insight/">Service Insight</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            </div>
                        </div>
                    </div>
                </div>
                
            
                
                
                <ul class="sidebar-reg-padding">
                    <div class="accordion" id="accordion1">
                        <div class="accordion-group">
                            <div class="accordion-heading">
                                <ul>
                                    <li class="nginx-toc-link l1">
                                        <a data-menu-id="/nginx-ingress-controller/usage-reporting/"
                                            href="https://docs.nginx.com/nginx-ingress-controller/usage-reporting/">Enable Usage Reporting</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </ul>
                
                
            
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                <a data-menu-id="/nginx-ingress-controller/troubleshooting/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#troubleshooting--troubleshooting"
                                    aria-controls="troubleshooting--troubleshooting">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Troubleshooting</a>
                            </li>
                        </div>
                        <div id="troubleshooting--troubleshooting" class="accordion-body collapse">
                            <div class="accordion-inner">
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/troubleshooting/troubleshoot-common/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/troubleshooting/troubleshoot-common/">Troubleshooting common issues</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/troubleshooting/troubleshoot-configmap-policy/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/troubleshooting/troubleshoot-configmap-policy/">Troubleshooting Policy resources</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/troubleshooting/troubleshoot-ingress/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/troubleshooting/troubleshoot-ingress/">Troubleshooting Ingress resources</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/troubleshooting/troubleshoot-virtualserver/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/troubleshooting/troubleshoot-virtualserver/">Troubleshooting VirtualServer resources</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            </div>
                        </div>
                    </div>
                </div>
                
            
                
                <div class="accordion" id="accordion1">
                    <div class="accordion-group">
                        <div class="accordion-heading">
                            <li class="nginx-toc-link l1">
                                <a data-menu-id="/nginx-ingress-controller/tutorials/" class="accordion-toggle" aria-expanded="false"
                                    data-toggle="collapse" href="#" data-target="#tutorials--tutorials"
                                    aria-controls="tutorials--tutorials">
                                    <i class="fa fa-2xs fa-fw fa-chevron-right"></i><i
                                        class="fa fa-2xs fa-fw fa-chevron-down"></i>Tutorials</a>
                            </li>
                        </div>
                        <div id="tutorials--tutorials" class="accordion-body collapse">
                            <div class="accordion-inner">
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/tutorials/virtual-server-with-custom-listener-ports/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/tutorials/virtual-server-with-custom-listener-ports/">Configuring VirtualServer with custom HTTP and HTTPS listener ports</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/tutorials/security-monitoring/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/tutorials/security-monitoring/">Connect NGINX App Protect WAF to NGINX Security Monitoring</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/tutorials/oidc-custom-configuration/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/tutorials/oidc-custom-configuration/">Customize OIDC Configuration with NGINX Ingress Controller</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/tutorials/custom-listen-ports/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/tutorials/custom-listen-ports/">Customizing NGINX Ingress Controller Ports</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/tutorials/ingress-path-regex-annotation/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/tutorials/ingress-path-regex-annotation/">Ingresses Path Matching Using Path-Regex Annotation</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/tutorials/nginx-ingress-istio/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/tutorials/nginx-ingress-istio/">NGINX Ingress Controller and Istio Service Mesh</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/tutorials/nginx-ingress-linkerd/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/tutorials/nginx-ingress-linkerd/">NGINX Ingress Controller and Linkerd</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/tutorials/nginx-ingress-osm/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/tutorials/nginx-ingress-osm/">NGINX Ingress Controller and Open Service Mesh</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            
                                
                                <ul class="sidebar-reg-padding">
                                    <div class="accordion" id="accordion2">
                                        <div class="accordion-group sidebar-il-border">
                                            <div class="accordion-heading">
                                                <ul>
                                                    <li class="nginx-toc-link l2">
                                                        <a data-menu-id="/nginx-ingress-controller/tutorials/nginx-dynamic-module/"
                                                            href="https://docs.nginx.com/nginx-ingress-controller/tutorials/nginx-dynamic-module/">Using NGINX Ingress Controller with NGINX Dynamic Modules</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                
                                
                            
                            </div>
                        </div>
                    </div>
                </div>
                
            
                
                
                <ul class="sidebar-reg-padding">
                    <div class="accordion" id="accordion1">
                        <div class="accordion-group">
                            <div class="accordion-heading">
                                <ul>
                                    <li class="nginx-toc-link l1">
                                        <a data-menu-id="/nginx-ingress-controller/releases/"
                                            href="https://docs.nginx.com/nginx-ingress-controller/releases/">Releases</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </ul>
                
                
            
                
                
                <ul class="sidebar-reg-padding">
                    <div class="accordion" id="accordion1">
                        <div class="accordion-group">
                            <div class="accordion-heading">
                                <ul>
                                    <li class="nginx-toc-link l1">
                                        <a data-menu-id="/nginx-ingress-controller/community/"
                                            href="https://docs.nginx.com/nginx-ingress-controller/community/">Community and contributing</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </ul>
                
                
            
                
                
                <ul class="sidebar-reg-padding">
                    <div class="accordion" id="accordion1">
                        <div class="accordion-group">
                            <div class="accordion-heading">
                                <ul>
                                    <li class="nginx-toc-link l1">
                                        <a data-menu-id="/nginx-ingress-controller/glossary/"
                                            href="https://docs.nginx.com/nginx-ingress-controller/glossary/">Glossary</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </ul>
                
                
            
        

            </ul>
        </div>
    
    </div>

</div>


  </nav>
  
  
  <main class="content col d-block align-top content-has-toc" role="main">
  
    
    <h1>Policy resources</h1>

      

      
  
    <p>The Policy resource allows you to configure features like access control and rate-limiting, which you can add to your <a href="/nginx-ingress-controller/configuration/virtualserver-and-virtualserverroute-resources/">VirtualServer and VirtualServerRoute resources</a>.</p>
<p>The resource is implemented as a <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/" target="_blank" rel="noopener">Custom Resource</a>.</p>
<p>This document is the reference documentation for the Policy resource. An example of a Policy for access control is available in our <a href="https://github.com/nginxinc/kubernetes-ingress/blob/v3.6.2/examples/custom-resources/access-control" target="_blank" rel="noopener">GitHub repository</a>.</p>
<h2 
id="prerequisites">Prerequisites  <a class="headerlink float-right" href="#prerequisites" title="Prerequisites"><i class="fas fa-link fa-xs"></i></a>
</h2><p>Policies work together with <a href="/nginx-ingress-controller/configuration/virtualserver-and-virtualserverroute-resources/">VirtualServer and VirtualServerRoute resources</a>, which you need to create separately.</p>
<h2 
id="policy-specification">Policy Specification  <a class="headerlink float-right" href="#policy-specification" title="Policy Specification"><i class="fas fa-link fa-xs"></i></a>
</h2><p>Below is an example of a policy that allows access for clients from the subnet <code>10.0.0.0/8</code> and denies access for any other clients:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">k8s.nginx.org/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Policy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">allow-localhost</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">accessControl</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">allow</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="m">10.0.0.0</span><span class="l">/8</span><span class="w">
</span></span></span></code></pre></div><style>
    table, th, td {
      border: 1px solid #CCC;
      border-collapse: collapse;
      list-style-position: inside;
    }
    th, td {
      padding: 5px;
    }
    th {
      text-align: center;
    }
</style>
<div style="width:100%;overflow-x:scroll;display:block;">
<table>
  <thead>
      <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Description</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Required</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>accessControl</code></td>
          <td style="text-align: left">The access control policy based on the client IP address.</td>
          <td style="text-align: left"><a href="#accesscontrol">accessControl</a></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>ingressClassName</code></td>
          <td style="text-align: left">Specifies which instance of NGINX Ingress Controller must handle the Policy resource.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>rateLimit</code></td>
          <td style="text-align: left">The rate limit policy controls the rate of processing requests per a defined key.</td>
          <td style="text-align: left"><a href="#ratelimit">rateLimit</a></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>apiKey</code></td>
          <td style="text-align: left">The API Key policy configures NGINX to authorize requests which provide a valid API Key in a specified header or query param.</td>
          <td style="text-align: left"><a href="#apikey">apiKey</a></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>basicAuth</code></td>
          <td style="text-align: left">The basic auth policy configures NGINX to authenticate client requests using HTTP Basic authentication credentials.</td>
          <td style="text-align: left"><a href="#basicauth">basicAuth</a></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>jwt</code></td>
          <td style="text-align: left">The JWT policy configures NGINX Plus to authenticate client requests using JSON Web Tokens.</td>
          <td style="text-align: left"><a href="#jwt">jwt</a></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>ingressMTLS</code></td>
          <td style="text-align: left">The IngressMTLS policy configures client certificate verification.</td>
          <td style="text-align: left"><a href="#ingressmtls">ingressMTLS</a></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>egressMTLS</code></td>
          <td style="text-align: left">The EgressMTLS policy configures upstreams authentication and certificate verification.</td>
          <td style="text-align: left"><a href="#egressmtls">egressMTLS</a></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>waf</code></td>
          <td style="text-align: left">The WAF policy configures WAF and log configuration policies for <a href="/nginx-ingress-controller/installation/integrations/app-protect-waf/configuration/">NGINX AppProtect</a></td>
          <td style="text-align: left"><a href="#waf">WAF</a></td>
          <td style="text-align: left">No</td>
      </tr>
  </tbody>
</table>
</div>
<p>* A policy must include exactly one policy.</p>
<h3 
id="accesscontrol">AccessControl  <a class="headerlink float-right" href="#accesscontrol" title="AccessControl"><i class="fas fa-link fa-xs"></i></a>
</h3><p>The access control policy configures NGINX to deny or allow requests from clients with the specified IP addresses/subnets.</p>
<p>For example, the following policy allows access for clients from the subnet <code>10.0.0.0/8</code> and denies access for any other clients:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">accessControl</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">allow</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="m">10.0.0.0</span><span class="l">/8</span><span class="w">
</span></span></span></code></pre></div><p>In contrast, the policy below does the opposite: denies access for clients from <code>10.0.0.0/8</code> and allows access for any other clients:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">accessControl</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">deny</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="m">10.0.0.0</span><span class="l">/8</span><span class="w">
</span></span></span></code></pre></div><blockquote class="note">
  <div><strong>Note:</strong><br/> The feature is implemented using the NGINX <a href="http://nginx.org/en/docs/http/ngx_http_access_module.html" target="_blank" rel="noopener">ngx_http_access_module</a>. NGINX Ingress Controller access control policy supports either allow or deny rules, but not both (as the module does).</div>
</blockquote>

<style>
    table, th, td {
      border: 1px solid #CCC;
      border-collapse: collapse;
      list-style-position: inside;
    }
    th, td {
      padding: 5px;
    }
    th {
      text-align: center;
    }
</style>
<div style="width:100%;overflow-x:scroll;display:block;">
<table>
  <thead>
      <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Description</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Required</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>allow</code></td>
          <td style="text-align: left">Allows access for the specified networks or addresses. For example, <code>192.168.1.1</code> or <code>10.1.1.0/16</code>.</td>
          <td style="text-align: left"><code>[]string</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>deny</code></td>
          <td style="text-align: left">Denies access for the specified networks or addresses. For example, <code>192.168.1.1</code> or <code>10.1.1.0/16</code>.</td>
          <td style="text-align: left"><code>[]string</code></td>
          <td style="text-align: left">No</td>
      </tr>
  </tbody>
</table>
</div>
<h4 
id="accesscontrol-merging-behavior">AccessControl Merging Behavior  <a class="headerlink float-right" href="#accesscontrol-merging-behavior" title="AccessControl Merging Behavior"><i class="fas fa-link fa-xs"></i></a>
</h4><p>A VirtualServer/VirtualServerRoute can reference multiple access control policies. For example, here we reference two policies, each with configured allow lists:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">policies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">allow-policy-one</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">allow-policy-two</span><span class="w">
</span></span></span></code></pre></div><p>When you reference more than one access control policy, NGINX Ingress Controller will merge the contents into a single allow list or a single deny list.</p>
<p>Referencing both allow and deny policies, as shown in the example below, is not supported. If both allow and deny lists are referenced, NGINX Ingress Controller uses just the allow list policies.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">policies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">deny-policy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">allow-policy-one</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">allow-policy-two</span><span class="w">
</span></span></span></code></pre></div><h3 
id="ratelimit">RateLimit  <a class="headerlink float-right" href="#ratelimit" title="RateLimit"><i class="fas fa-link fa-xs"></i></a>
</h3><p>The rate limit policy configures NGINX to limit the processing rate of requests.</p>
<p>For example, the following policy will limit all subsequent requests coming from a single IP address once a rate of 10 requests per second is exceeded:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">rateLimit</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">rate</span><span class="p">:</span><span class="w"> </span><span class="l">10r/s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">zoneSize</span><span class="p">:</span><span class="w"> </span><span class="l">10M</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">${binary_remote_addr}</span><span class="w">
</span></span></span></code></pre></div><blockquote class="note">
  <div><strong>Note:</strong><br/> The feature is implemented using the NGINX <a href="https://nginx.org/en/docs/http/ngx_http_limit_req_module.html" target="_blank" rel="noopener">ngx_http_limit_req_module</a>.</div>
</blockquote>

<style>
    table, th, td {
      border: 1px solid #CCC;
      border-collapse: collapse;
      list-style-position: inside;
    }
    th, td {
      padding: 5px;
    }
    th {
      text-align: center;
    }
</style>
<div style="width:100%;overflow-x:scroll;display:block;">
<table>
  <thead>
      <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Description</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Required</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>rate</code></td>
          <td style="text-align: left">The rate of requests permitted. The rate is specified in requests per second (r/s) or requests per minute (r/m).</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Yes</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>key</code></td>
          <td style="text-align: left">The key to which the rate limit is applied. Can contain text, variables, or a combination of them. Variables must be surrounded by <code>${}</code>. For example: <code>${binary_remote_addr}</code>. Accepted variables are <code>$binary_remote_addr</code>, <code>$request_uri</code>, <code>$url</code>, <code>$http_</code>, <code>$args</code>, <code>$arg_</code>, <code>$cookie_</code>.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Yes</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>zoneSize</code></td>
          <td style="text-align: left">Size of the shared memory zone. Only positive values are allowed. Allowed suffixes are <code>k</code> or <code>m</code>, if none are present <code>k</code> is assumed.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Yes</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>delay</code></td>
          <td style="text-align: left">The delay parameter specifies a limit at which excessive requests become delayed. If not set all excessive requests are delayed.</td>
          <td style="text-align: left"><code>int</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>noDelay</code></td>
          <td style="text-align: left">Disables the delaying of excessive requests while requests are being limited. Overrides <code>delay</code> if both are set.</td>
          <td style="text-align: left"><code>bool</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>burst</code></td>
          <td style="text-align: left">Excessive requests are delayed until their number exceeds the <code>burst</code> size, in which case the request is terminated with an error.</td>
          <td style="text-align: left"><code>int</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>dryRun</code></td>
          <td style="text-align: left">Enables the dry run mode. In this mode, the rate limit is not actually applied, but the number of excessive requests is accounted as usual in the shared memory zone.</td>
          <td style="text-align: left"><code>bool</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>logLevel</code></td>
          <td style="text-align: left">Sets the desired logging level for cases when the server refuses to process requests due to rate exceeding, or delays request processing. Allowed values are <code>info</code>, <code>notice</code>, <code>warn</code> or <code>error</code>. Default is <code>error</code>.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>rejectCode</code></td>
          <td style="text-align: left">Sets the status code to return in response to rejected requests. Must fall into the range <code>400..599</code>. Default is <code>503</code>.</td>
          <td style="text-align: left"><code>int</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>scale</code></td>
          <td style="text-align: left">Enables a constant rate-limit by dividing the configured rate by the number of nginx-ingress pods currently serving traffic. This adjustment ensures that the rate-limit remains consistent, even as the number of nginx-pods fluctuates due to autoscaling. Note: This will not work properly if requests from a client are not evenly distributed accross all ingress pods (sticky sessions, long lived TCP-Connections with many requests etc.). In such cases using NGINX+&rsquo;s zone-sync feature instead would give better results.</td>
          <td style="text-align: left"><code>bool</code></td>
          <td style="text-align: left">No</td>
      </tr>
  </tbody>
</table>
</div>
<blockquote class="note">
  <div><strong>Note:</strong><br/> For each policy referenced in a VirtualServer and/or its VirtualServerRoutes, NGINX Ingress Controller will generate a single rate limiting zone defined by the <a href="http://nginx.org/en/docs/http/ngx_http_limit_req_module.html#limit_req_zone" target="_blank" rel="noopener"><code>limit_req_zone</code></a> directive. If two VirtualServer resources reference the same policy, NGINX Ingress Controller will generate two different rate limiting zones, one zone per VirtualServer.</div>
</blockquote>

<h4 
id="ratelimit-merging-behavior">RateLimit Merging Behavior  <a class="headerlink float-right" href="#ratelimit-merging-behavior" title="RateLimit Merging Behavior"><i class="fas fa-link fa-xs"></i></a>
</h4><p>A VirtualServer/VirtualServerRoute can reference multiple rate limit policies. For example, here we reference two policies:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">policies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">rate-limit-policy-one</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">rate-limit-policy-two</span><span class="w">
</span></span></span></code></pre></div><p>When you reference more than one rate limit policy, NGINX Ingress Controller will configure NGINX to use all referenced rate limits. When you define multiple policies, each additional policy inherits the <code>dryRun</code>, <code>logLevel</code>, and <code>rejectCode</code> parameters from the first policy referenced (<code>rate-limit-policy-one</code>, in the example above).</p>
<h3 
id="apikey">APIKey  <a class="headerlink float-right" href="#apikey" title="APIKey"><i class="fas fa-link fa-xs"></i></a>
</h3><p>The API Key auth policy configures NGINX to authorize client requests based on the presence of a valid API Key in a header or query param specified in the policy.</p>
<blockquote class="note">
  <div><strong>Note:</strong><br/> The feature is implemented using NGINX <a href="http://nginx.org/en/docs/http/ngx_http_auth_request_module.html" target="_blank" rel="noopener">ngx_http_auth_request_module</a> and <a href="https://nginx.org/en/docs/njs/" target="_blank" rel="noopener">NGINX JavaScript (NJS)</a>.</div>
</blockquote>

<p>The policies&rsquo; API keys are securely stored using SHA-256 hashing. When a client sends an API Key, it is hashed by NJS and then compared to the hashed API Key in the NGINX config.</p>
<p>If the hashed keys match, the NGINX JavaScript (NJS) subrequest issues a 204 No Content response to the <code>auth_request</code> directive, indicating successful authorization. Conversely, if no API Key is provided in the specified header or query parameter, a 401 Unauthorized response is returned. Similarly, if an invalid key is presented in the expected header or query parameter, a 403 Forbidden response is issued, denying access.</p>
<p>It is possible to use the <a href="/nginx-ingress-controller/configuration/virtualserver-and-virtualserverroute-resources/#errorpage">errorPages</a> property on a route, to change the default behaviour of 401 or 403 errors.</p>
<p>At least one header or query param is required.</p>
<p>The policy below configures NGINX Ingress Controller to require the API Key <code>password</code> in the header &ldquo;my-header&rdquo;.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiKey</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">suppliedIn</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">header</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;my-header&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">clientSecret</span><span class="p">:</span><span class="w"> </span><span class="l">api-key-secret</span><span class="w">
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Secret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">api-key-secret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">nginx.org/apikey</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">data</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">client1</span><span class="p">:</span><span class="w"> </span><span class="l">cGFzc3dvcmQ=</span><span class="w"> </span><span class="c"># password</span><span class="w">
</span></span></span></code></pre></div><style>
    table, th, td {
      border: 1px solid #CCC;
      border-collapse: collapse;
      list-style-position: inside;
    }
    th, td {
      padding: 5px;
    }
    th {
      text-align: center;
    }
</style>
<div style="width:100%;overflow-x:scroll;display:block;">
<table>
  <thead>
      <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Description</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Required</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>suppliedIn.header</code></td>
          <td style="text-align: left">An array of headers that the API Key may appear in.</td>
          <td style="text-align: left"><code>string[]</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>suppliedIn.query</code></td>
          <td style="text-align: left">An array of query params that the API Key may appear in.</td>
          <td style="text-align: left"><code>string[]</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>clientSecret</code></td>
          <td style="text-align: left">The name of the Kubernetes secret that stores the API Key(s). It must be in the same namespace as the Policy resource. The secret must be of the type <code>nginx.org/apikey</code>, and the API Key(s) must be stored in a key: val format where each key is a unique clientID and each value is a unique base64 encoded API Key</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Yes</td>
      </tr>
  </tbody>
</table>
</div>
<h4 
id="apikey-merging-behavior">APIKey Merging Behavior  <a class="headerlink float-right" href="#apikey-merging-behavior" title="APIKey Merging Behavior"><i class="fas fa-link fa-xs"></i></a>
</h4><p>A VirtualServer or VirtualServerRoute can be associated with only one API Key policy per route or subroute. However, it is possible to replace an API Key policy from a higher-level with a different policy defined on a more specific route.</p>
<p>For example, a VirtualServer can implement different API Key policies at various levels. In the configuration below, the server-wide api-key-policy-server applies to /backend1 for authorization, as it lacks a more specific policy. Meanwhile, /backend2 uses the api-key-policy-route defined at the route level.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">k8s.nginx.org/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">VirtualServer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">virtual-server</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l">virtual-server.example.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">policies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">api-key-policy-server</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">upstreams</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">backend2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">backend2-svc</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">backend1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">backend1-svc</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">routes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/backend1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">action</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">pass</span><span class="p">:</span><span class="w"> </span><span class="l">backend1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/backend2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">action</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">pass</span><span class="p">:</span><span class="w"> </span><span class="l">backend2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">policies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">api-key-policy-route</span><span class="w">
</span></span></span></code></pre></div><h3 
id="basicauth">BasicAuth  <a class="headerlink float-right" href="#basicauth" title="BasicAuth"><i class="fas fa-link fa-xs"></i></a>
</h3><p>The basic auth policy configures NGINX to authenticate client requests using the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication" target="_blank" rel="noopener">HTTP Basic authentication scheme</a>.</p>
<p>For example, the following policy will reject all requests that do not include a valid username/password combination in the HTTP header <code>Authentication</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">basicAuth</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">secret</span><span class="p">:</span><span class="w"> </span><span class="l">htpasswd-secret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;My API&#34;</span><span class="w">
</span></span></span></code></pre></div><blockquote class="note">
  <div><strong>Note:</strong><br/> The feature is implemented using the NGINX <a href="https://nginx.org/en/docs/http/ngx_http_auth_basic_module.html" target="_blank" rel="noopener">ngx_http_auth_basic_module</a>.</div>
</blockquote>

<style>
    table, th, td {
      border: 1px solid #CCC;
      border-collapse: collapse;
      list-style-position: inside;
    }
    th, td {
      padding: 5px;
    }
    th {
      text-align: center;
    }
</style>
<div style="width:100%;overflow-x:scroll;display:block;">
<table>
  <thead>
      <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Description</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Required</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>secret</code></td>
          <td style="text-align: left">The name of the Kubernetes secret that stores the Htpasswd configuration. It must be in the same namespace as the Policy resource. The secret must be of the type <code>nginx.org/htpasswd</code>, and the config must be stored in the secret under the key <code>htpasswd</code>, otherwise the secret will be rejected as invalid.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Yes</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>realm</code></td>
          <td style="text-align: left">The realm for the basic authentication.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
  </tbody>
</table>
</div>
<h4 
id="basicauth-merging-behavior">BasicAuth Merging Behavior  <a class="headerlink float-right" href="#basicauth-merging-behavior" title="BasicAuth Merging Behavior"><i class="fas fa-link fa-xs"></i></a>
</h4><p>A VirtualServer/VirtualServerRoute can reference multiple basic auth policies. However, only one can be applied. Every subsequent reference will be ignored. For example, here we reference two policies:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">policies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">basic-auth-policy-one</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">basic-auth-policy-two</span><span class="w">
</span></span></span></code></pre></div><p>In this example NGINX Ingress Controller will use the configuration from the first policy reference <code>basic-auth-policy-one</code>, and ignores <code>basic-auth-policy-two</code>.</p>
<h3 
id="jwt-using-local-kubernetes-secret">JWT Using Local Kubernetes Secret  <a class="headerlink float-right" href="#jwt-using-local-kubernetes-secret" title="JWT Using Local Kubernetes Secret"><i class="fas fa-link fa-xs"></i></a>
</h3><blockquote class="note">
  <div><strong>Note:</strong><br/> This feature is only available with NGINX Plus.</div>
</blockquote>

<p>The JWT policy configures NGINX Plus to authenticate client requests using JSON Web Tokens.</p>
<p>The following example policy will reject all requests that do not include a valid JWT in the HTTP header <code>token</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">jwt</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">secret</span><span class="p">:</span><span class="w"> </span><span class="l">jwk-secret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;My API&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="l">$http_token</span><span class="w">
</span></span></span></code></pre></div><p>You can pass the JWT claims and JOSE headers to the upstream servers. For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">action</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">proxy</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">upstream</span><span class="p">:</span><span class="w"> </span><span class="l">webapp</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">requestHeaders</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">set</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">user</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l">${jwt_claim_user}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">alg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l">${jwt_header_alg}</span><span class="w">
</span></span></span></code></pre></div><p>We use the <code>requestHeaders</code> of the <a href="/nginx-ingress-controller/configuration/virtualserver-and-virtualserverroute-resources/#actionproxy">Action.Proxy</a> to set the values of two headers that NGINX will pass to the upstream servers.</p>
<p>The value of the <code>${jwt_claim_user}</code> variable is the <code>user</code> claim of a JWT. For other claims, use <code>${jwt_claim_name}</code>, where <code>name</code> is the name of the claim. Note that nested claims and claims that include a period (<code>.</code>) are not supported. Similarly, use <code>${jwt_header_name}</code> where <code>name</code> is the name of a header. In our example, we use the <code>alg</code> header.</p>
<blockquote class="note">
  <div><strong>Note:</strong><br/> This feature is implemented using the NGINX Plus <a href="https://nginx.org/en/docs/http/ngx_http_auth_jwt_module.html" target="_blank" rel="noopener">ngx_http_auth_jwt_module</a>.</div>
</blockquote>

<style>
    table, th, td {
      border: 1px solid #CCC;
      border-collapse: collapse;
      list-style-position: inside;
    }
    th, td {
      padding: 5px;
    }
    th {
      text-align: center;
    }
</style>
<div style="width:100%;overflow-x:scroll;display:block;">
<table>
  <thead>
      <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Description</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Required</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>secret</code></td>
          <td style="text-align: left">The name of the Kubernetes secret that stores the JWK. It must be in the same namespace as the Policy resource. The secret must be of the type <code>nginx.org/jwk</code>, and the JWK must be stored in the secret under the key <code>jwk</code>, otherwise the secret will be rejected as invalid.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Yes</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>realm</code></td>
          <td style="text-align: left">The realm of the JWT.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Yes</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>token</code></td>
          <td style="text-align: left">The token specifies a variable that contains the JSON Web Token. By default the JWT is passed in the <code>Authorization</code> header as a Bearer Token. JWT may be also passed as a cookie or a part of a query string, for example: <code>$cookie_auth_token</code>. Accepted variables are <code>$http_</code>, <code>$arg_</code>, <code>$cookie_</code>.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
  </tbody>
</table>
</div>
<h4 
id="jwt-merging-behavior">JWT Merging Behavior  <a class="headerlink float-right" href="#jwt-merging-behavior" title="JWT Merging Behavior"><i class="fas fa-link fa-xs"></i></a>
</h4><p>A VirtualServer/VirtualServerRoute can reference multiple JWT policies. However, only one can be applied: every subsequent reference will be ignored. For example, here we reference two policies:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">policies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">jwt-policy-one</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">jwt-policy-two</span><span class="w">
</span></span></span></code></pre></div><p>In this example NGINX Ingress Controller will use the configuration from the first policy reference <code>jwt-policy-one</code>, and ignores <code>jwt-policy-two</code>.</p>
<h3 
id="jwt-using-jwks-from-remote-location">JWT Using JWKS From Remote Location  <a class="headerlink float-right" href="#jwt-using-jwks-from-remote-location" title="JWT Using JWKS From Remote Location"><i class="fas fa-link fa-xs"></i></a>
</h3><blockquote class="note">
  <div><strong>Note:</strong><br/> This feature is only available with NGINX Plus.</div>
</blockquote>

<p>The JWT policy configures NGINX Plus to authenticate client requests using JSON Web Tokens, allowing import of the keys (JWKS) for JWT policy by means of a URL (for a remote server or an identity provider) as a result they don&rsquo;t have to be copied and updated to the IC pod.</p>
<p>The following example policy will reject all requests that do not include a valid JWT in the HTTP header fetched from the identity provider:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">jwt</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="l">MyProductAPI</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="l">$http_token</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">jwksURI</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;uri_to_remote_server_or_idp&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">keyCache</span><span class="p">:</span><span class="w"> </span><span class="l">1h</span><span class="w">
</span></span></span></code></pre></div><blockquote class="note">
  <div><strong>Note:</strong><br/> This feature is implemented using the NGINX Plus directive <a href="http://nginx.org/en/docs/http/ngx_http_auth_jwt_module.html#auth_jwt_key_request" target="_blank" rel="noopener">auth_jwt_key_request</a> under <a href="https://nginx.org/en/docs/http/ngx_http_auth_jwt_module.html" target="_blank" rel="noopener">ngx_http_auth_jwt_module</a>.</div>
</blockquote>

<style>
    table, th, td {
      border: 1px solid #CCC;
      border-collapse: collapse;
      list-style-position: inside;
    }
    th, td {
      padding: 5px;
    }
    th {
      text-align: center;
    }
</style>
<div style="width:100%;overflow-x:scroll;display:block;">
<table>
  <thead>
      <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Description</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Required</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>jwksURI</code></td>
          <td style="text-align: left">The remote URI where the request will be sent to retrieve JSON Web Key set</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Yes</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>keyCache</code></td>
          <td style="text-align: left">Enables in-memory caching of JWKS (JSON Web Key Sets) that are obtained from the <code>jwksURI</code> and sets a valid time for expiration.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Yes</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>realm</code></td>
          <td style="text-align: left">The realm of the JWT.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Yes</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>token</code></td>
          <td style="text-align: left">The token specifies a variable that contains the JSON Web Token. By default the JWT is passed in the <code>Authorization</code> header as a Bearer Token. JWT may be also passed as a cookie or a part of a query string, for example: <code>$cookie_auth_token</code>. Accepted variables are <code>$http_</code>, <code>$arg_</code>, <code>$cookie_</code>.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
  </tbody>
</table>
</div>
<blockquote class="note">
  <div><strong>Note:</strong><br/> <p>Content caching is enabled by default for each JWT policy with a default time of 12 hours.</p>
<p>This is done to ensure to improve resiliency by allowing the JWKS (JSON Web Key Set) to be retrieved from the cache even when it has expired.</p>
</div>
</blockquote>

<h4 
id="jwt-merging-behavior-1">JWT Merging Behavior  <a class="headerlink float-right" href="#jwt-merging-behavior-1" title="JWT Merging Behavior"><i class="fas fa-link fa-xs"></i></a>
</h4><p>This behavior is similar to using a local Kubernetes secret where a VirtualServer/VirtualServerRoute can reference multiple JWT policies. However, only one can be applied: every subsequent reference will be ignored. For example, here we reference two policies:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">policies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">jwt-policy-one</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">jwt-policy-two</span><span class="w">
</span></span></span></code></pre></div><p>In this example NGINX Ingress Controller will use the configuration from the first policy reference <code>jwt-policy-one</code>, and ignores <code>jwt-policy-two</code>.</p>
<h3 
id="ingressmtls">IngressMTLS  <a class="headerlink float-right" href="#ingressmtls" title="IngressMTLS"><i class="fas fa-link fa-xs"></i></a>
</h3><p>The IngressMTLS policy configures client certificate verification.</p>
<p>For example, the following policy will verify a client certificate using the CA certificate specified in the <code>ingress-mtls-secret</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">ingressMTLS</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">clientCertSecret</span><span class="p">:</span><span class="w"> </span><span class="l">ingress-mtls-secret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">verifyClient</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;on&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">verifyDepth</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span></span></span></code></pre></div><p>Below is an example of the <code>ingress-mtls-secret</code> using the secret type <code>nginx.org/ca</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Secret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ingress-mtls-secret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">nginx.org/ca</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">data</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">ca.crt</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;base64encoded-certificate&gt;</span><span class="w">
</span></span></span></code></pre></div><p>A VirtualServer that references an IngressMTLS policy must:</p>
<ul>
<li>Enable <a href="/nginx-ingress-controller/configuration/virtualserver-and-virtualserverroute-resources/#virtualservertls">TLS termination</a>.</li>
<li>Reference the policy in the VirtualServer <a href="/nginx-ingress-controller/configuration/virtualserver-and-virtualserverroute-resources/#virtualserver-specification"><code>spec</code></a>. It is not allowed to reference an IngressMTLS policy in a <a href="/nginx-ingress-controller/configuration/virtualserver-and-virtualserverroute-resources/#virtualserverroute"><code>route</code></a> or in a VirtualServerRoute <a href="/nginx-ingress-controller/configuration/virtualserver-and-virtualserverroute-resources/#virtualserverroutesubroute"><code>subroute</code></a>.</li>
</ul>
<p>If the conditions above are not met, NGINX will send the <code>500</code> status code to clients.</p>
<p>You can pass the client certificate details, including the certificate, to the upstream servers. For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">action</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">proxy</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">upstream</span><span class="p">:</span><span class="w"> </span><span class="l">webapp</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">requestHeaders</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">set</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">client-cert-subj-dn</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l">${ssl_client_s_dn}</span><span class="w"> </span><span class="c"># subject DN</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">client-cert</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l">${ssl_client_escaped_cert}</span><span class="w"> </span><span class="c"># client certificate in the PEM format (urlencoded)</span><span class="w">
</span></span></span></code></pre></div><p>We use the <code>requestHeaders</code> of the <a href="/nginx-ingress-controller/configuration/virtualserver-and-virtualserverroute-resources/#actionproxy">Action.Proxy</a> to set the values of the two headers that NGINX will pass to the upstream servers. See the <a href="https://nginx.org/en/docs/http/ngx_http_ssl_module.html#variables" target="_blank" rel="noopener">list of embedded variables</a> that are supported by the <code>ngx_http_ssl_module</code>, which you can use to pass the client certificate details.</p>
<blockquote class="note">
  <div><strong>Note:</strong><br/> The feature is implemented using the NGINX <a href="https://nginx.org/en/docs/http/ngx_http_ssl_module.html" target="_blank" rel="noopener">ngx_http_ssl_module</a>.</div>
</blockquote>

<h4 
id="using-a-certificate-revocation-list">Using a Certificate Revocation List  <a class="headerlink float-right" href="#using-a-certificate-revocation-list" title="Using a Certificate Revocation List"><i class="fas fa-link fa-xs"></i></a>
</h4><p>The IngressMTLS policy supports configuring at CRL for your policy.
This can be done in one of two ways.</p>
<blockquote class="note">
  <div><strong>Note:</strong><br/> Only one of these configurations options can be used at a time.</div>
</blockquote>

<ol>
<li>Adding the <code>ca.crl</code> field to the <code>nginx.org/ca</code> secret type, which accepts a base64 encoded certificate revocation list (crl).
Example YAML:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Secret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ingress-mtls-secret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">nginx.org/ca</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">data</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">ca.crt</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;base64encoded-certificate&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">ca.crl</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;base64encoded-crl&gt;</span><span class="w">
</span></span></span></code></pre></div><ol start="2">
<li>Adding the <code>crlFileName</code> field to your IngressMTLS policy spec with the name of the CRL file.</li>
</ol>
<blockquote class="note">
  <div><strong>Note:</strong><br/> <p>This configuration option should only be used when using a CRL that is larger than 1MiB.</p>
<p>Otherwise we recommend using the <code>nginx.org/ca</code> secret type for managing your CRL.</p>
</div>
</blockquote>

<p>Example YAML:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">k8s.nginx.org/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Policy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ingress-mtls-policy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">ingressMTLS</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">clientCertSecret</span><span class="p">:</span><span class="w"> </span><span class="l">ingress-mtls-secret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">crlFileName</span><span class="p">:</span><span class="w"> </span><span class="l">webapp.crl</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">verifyClient</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;on&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">verifyDepth</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span></span></span></code></pre></div><p><strong>IMPORTANT NOTE</strong>
When configuring a CRL with the <code>ingressMTLS.crlFileName</code> field, there is additional context to keep in mind:</p>
<ol>
<li>NGINX Ingress Controller will expect the CRL, in this case <code>webapp.crl</code>, will be in <code>/etc/nginx/secrets</code>. A volume mount will need to be added to NGINX Ingress Controller deployment add your CRL to <code>/etc/nginx/secrets</code></li>
<li>When updating the content of your CRL (e.g a new certificate has been revoked), NGINX will need to be reloaded to pick up the latest changes. Depending on your environment this may require updating the name of your CRL and applying this update to your <code>ingress-mtls.yaml</code> policy to ensure NGINX picks up the latest CRL.</li>
</ol>
<p>Please refer to the Kubernetes documentation on <a href="https://kubernetes.io/docs/concepts/storage/volumes/" target="_blank" rel="noopener">volumes</a> to find the best implementation for your environment.</p>
<style>
    table, th, td {
      border: 1px solid #CCC;
      border-collapse: collapse;
      list-style-position: inside;
    }
    th, td {
      padding: 5px;
    }
    th {
      text-align: center;
    }
</style>
<div style="width:100%;overflow-x:scroll;display:block;">
<table>
  <thead>
      <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Description</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Required</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>clientCertSecret</code></td>
          <td style="text-align: left">The name of the Kubernetes secret that stores the CA certificate. It must be in the same namespace as the Policy resource. The secret must be of the type <code>nginx.org/ca</code>, and the certificate must be stored in the secret under the key <code>ca.crt</code>, otherwise the secret will be rejected as invalid.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Yes</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>verifyClient</code></td>
          <td style="text-align: left">Verification for the client. Possible values are <code>&quot;on&quot;</code>, <code>&quot;off&quot;</code>, <code>&quot;optional&quot;</code>, <code>&quot;optional_no_ca&quot;</code>. The default is <code>&quot;on&quot;</code>.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>verifyDepth</code></td>
          <td style="text-align: left">Sets the verification depth in the client certificates chain. The default is <code>1</code>.</td>
          <td style="text-align: left"><code>int</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>crlFileName</code></td>
          <td style="text-align: left">The file name of the Certificate Revocation List. NGINX Ingress Controller will look for this file in <code>/etc/nginx/secrets</code></td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
  </tbody>
</table>
</div>
<h4 
id="ingressmtls-merging-behavior">IngressMTLS Merging Behavior  <a class="headerlink float-right" href="#ingressmtls-merging-behavior" title="IngressMTLS Merging Behavior"><i class="fas fa-link fa-xs"></i></a>
</h4><p>A VirtualServer can reference only a single IngressMTLS policy. Every subsequent reference will be ignored. For example, here we reference two policies:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">policies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ingress-mtls-policy-one</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ingress-mtls-policy-two</span><span class="w">
</span></span></span></code></pre></div><p>In this example NGINX Ingress Controller will use the configuration from the first policy reference <code>ingress-mtls-policy-one</code>, and ignores <code>ingress-mtls-policy-two</code>.</p>
<h3 
id="egressmtls">EgressMTLS  <a class="headerlink float-right" href="#egressmtls" title="EgressMTLS"><i class="fas fa-link fa-xs"></i></a>
</h3><p>The EgressMTLS policy configures upstreams authentication and certificate verification.</p>
<p>For example, the following policy will use <code>egress-mtls-secret</code> to authenticate with the upstream application and <code>egress-trusted-ca-secret</code> to verify the certificate of the application:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">egressMTLS</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tlsSecret</span><span class="p">:</span><span class="w"> </span><span class="l">egress-mtls-secret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">trustedCertSecret</span><span class="p">:</span><span class="w"> </span><span class="l">egress-trusted-ca-secret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">verifyServer</span><span class="p">:</span><span class="w"> </span><span class="kc">on</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">verifyDepth</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span></code></pre></div><blockquote class="note">
  <div><strong>Note:</strong><br/> The feature is implemented using the NGINX <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html" target="_blank" rel="noopener">ngx_http_proxy_module</a>.</div>
</blockquote>

<style>
    table, th, td {
      border: 1px solid #CCC;
      border-collapse: collapse;
      list-style-position: inside;
    }
    th, td {
      padding: 5px;
    }
    th {
      text-align: center;
    }
</style>
<div style="width:100%;overflow-x:scroll;display:block;">
<table>
  <thead>
      <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Description</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Required</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>tlsSecret</code></td>
          <td style="text-align: left">The name of the Kubernetes secret that stores the TLS certificate and key. It must be in the same namespace as the Policy resource. The secret must be of the type <code>kubernetes.io/tls</code>, the certificate must be stored in the secret under the key <code>tls.crt</code>, and the key must be stored under the key <code>tls.key</code>, otherwise the secret will be rejected as invalid.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>trustedCertSecret</code></td>
          <td style="text-align: left">The name of the Kubernetes secret that stores the CA certificate. It must be in the same namespace as the Policy resource. The secret must be of the type <code>nginx.org/ca</code>, and the certificate must be stored in the secret under the key <code>ca.crt</code>, otherwise the secret will be rejected as invalid.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>verifyServer</code></td>
          <td style="text-align: left">Enables verification of the upstream HTTPS server certificate.</td>
          <td style="text-align: left"><code>bool</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>verifyDepth</code></td>
          <td style="text-align: left">Sets the verification depth in the proxied HTTPS server certificates chain. The default is <code>1</code>.</td>
          <td style="text-align: left"><code>int</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>sessionReuse</code></td>
          <td style="text-align: left">Enables reuse of SSL sessions to the upstreams. The default is <code>true</code>.</td>
          <td style="text-align: left"><code>bool</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>serverName</code></td>
          <td style="text-align: left">Enables passing of the server name through <code>Server Name Indication</code> extension.</td>
          <td style="text-align: left"><code>bool</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>sslName</code></td>
          <td style="text-align: left">Allows overriding the server name used to verify the certificate of the upstream HTTPS server.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>ciphers</code></td>
          <td style="text-align: left">Specifies the enabled ciphers for requests to an upstream HTTPS server. The default is <code>DEFAULT</code>.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>protocols</code></td>
          <td style="text-align: left">Specifies the protocols for requests to an upstream HTTPS server. The default is <code>TLSv1 TLSv1.1 TLSv1.2</code>.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
  </tbody>
</table>
</div>
<h4 
id="egressmtls-merging-behavior">EgressMTLS Merging Behavior  <a class="headerlink float-right" href="#egressmtls-merging-behavior" title="EgressMTLS Merging Behavior"><i class="fas fa-link fa-xs"></i></a>
</h4><p>A VirtualServer/VirtualServerRoute can reference multiple EgressMTLS policies. However, only one can be applied. Every subsequent reference will be ignored. For example, here we reference two policies:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">policies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">egress-mtls-policy-one</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">egress-mtls-policy-two</span><span class="w">
</span></span></span></code></pre></div><p>In this example NGINX Ingress Controller will use the configuration from the first policy reference <code>egress-mtls-policy-one</code>, and ignores <code>egress-mtls-policy-two</code>.</p>
<h3 
id="oidc">OIDC  <a class="headerlink float-right" href="#oidc" title="OIDC"><i class="fas fa-link fa-xs"></i></a>
</h3><blockquote class="tip">
  <div><strong>Tip:</strong><br/> This feature is disabled by default. To enable it, set the <a href="/nginx-ingress-controller/configuration/global-configuration/command-line-arguments/#cmdoption-enable-oidc">enable-oidc</a> command-line argument of NGINX Ingress Controller.</div>
</blockquote>

<p>The OIDC policy configures NGINX Plus as a relying party for OpenID Connect authentication.</p>
<p>For example, the following policy will use the client ID <code>nginx-plus</code> and the client secret <code>oidc-secret</code> to authenticate with the OpenID Connect provider <code>https://idp.example.com</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">oidc</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">clientID</span><span class="p">:</span><span class="w"> </span><span class="l">nginx-plus</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">clientSecret</span><span class="p">:</span><span class="w"> </span><span class="l">oidc-secret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">authEndpoint</span><span class="p">:</span><span class="w"> </span><span class="l">https://idp.example.com/openid-connect/auth</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">tokenEndpoint</span><span class="p">:</span><span class="w"> </span><span class="l">https://idp.example.com/openid-connect/token</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">jwksURI</span><span class="p">:</span><span class="w"> </span><span class="l">https://idp.example.com/openid-connect/certs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">endSessionEndpoint</span><span class="p">:</span><span class="w"> </span><span class="l">https://idp.example.com/openid-connect/logout</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">postLogoutRedirectURI</span><span class="p">:</span><span class="w"> </span><span class="l">/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">accessTokenEnable</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span></code></pre></div><p>NGINX Plus will pass the ID of an authenticated user to the backend in the HTTP header <code>username</code>.</p>
<blockquote class="note">
  <div><strong>Note:</strong><br/> The feature is implemented using the <a href="https://github.com/nginxinc/nginx-openid-connect/" target="_blank" rel="noopener">reference implementation</a> of NGINX Plus as a relying party for OpenID Connect authentication.</div>
</blockquote>

<h4 
id="prerequisites-1">Prerequisites  <a class="headerlink float-right" href="#prerequisites-1" title="Prerequisites"><i class="fas fa-link fa-xs"></i></a>
</h4><p>In order to use OIDC, you need to enable <a href="https://docs.nginx.com/nginx/admin-guide/high-availability/zone_sync/" target="_blank" rel="noopener">zone synchronization</a>. If you don&rsquo;t set up zone synchronization, NGINX Plus will fail to reload.
You also need to configure a resolver, which NGINX Plus will use to resolve the IDP authorization endpoint. You can find an example configuration <a href="https://github.com/nginxinc/kubernetes-ingress/blob/v3.6.2/examples/custom-resources/oidc#step-7---configure-nginx-plus-zone-synchronization-and-resolver" target="_blank" rel="noopener">in our GitHub repository</a>.</p>
<blockquote class="warning">
  <div><strong>Warning:</strong><br/> The configuration in the example doesn&rsquo;t enable TLS and the synchronization between the replica happens in clear text. This could lead to the exposure of tokens.</div>
</blockquote>

<h4 
id="limitations">Limitations  <a class="headerlink float-right" href="#limitations" title="Limitations"><i class="fas fa-link fa-xs"></i></a>
</h4><p>The OIDC policy defines a few internal locations that can&rsquo;t be customized: <code>/_jwks_uri</code>, <code>/_token</code>, <code>/_refresh</code>, <code>/_id_token_validation</code>, <code>/logout</code>. In addition, as explained below, <code>/_codexch</code> is the default value for redirect URI, and <code>/_logout</code> is the default value for post logout redirect URI, both of which can be customized. Specifying one of these locations as a route in the VirtualServer or VirtualServerRoute will result in a collision and NGINX Plus will fail to reload.</p>
<style>
    table, th, td {
      border: 1px solid #CCC;
      border-collapse: collapse;
      list-style-position: inside;
    }
    th, td {
      padding: 5px;
    }
    th {
      text-align: center;
    }
</style>
<div style="width:100%;overflow-x:scroll;display:block;">
<table>
  <thead>
      <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Description</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Required</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>clientID</code></td>
          <td style="text-align: left">The client ID provided by your OpenID Connect provider.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Yes</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>clientSecret</code></td>
          <td style="text-align: left">The name of the Kubernetes secret that stores the client secret provided by your OpenID Connect provider. It must be in the same namespace as the Policy resource. The secret must be of the type <code>nginx.org/oidc</code>, and the secret under the key <code>client-secret</code>, otherwise the secret will be rejected as invalid.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Yes</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>authEndpoint</code></td>
          <td style="text-align: left">URL for the authorization endpoint provided by your OpenID Connect provider.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Yes</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>authExtraArgs</code></td>
          <td style="text-align: left">A list of extra URL arguments to pass to the authorization endpoint provided by your OpenID Connect provider. Arguments must be URL encoded, multiple arguments may be included in the list, for example <code>[ arg1=value1, arg2=value2 ]</code></td>
          <td style="text-align: left"><code>string[]</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>tokenEndpoint</code></td>
          <td style="text-align: left">URL for the token endpoint provided by your OpenID Connect provider.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Yes</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>endSessionEndpoint</code></td>
          <td style="text-align: left">URL provided by your OpenID Connect provider to request the end user be logged out.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>jwksURI</code></td>
          <td style="text-align: left">URL for the JSON Web Key Set (JWK) document provided by your OpenID Connect provider.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">Yes</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>scope</code></td>
          <td style="text-align: left">List of OpenID Connect scopes. The scope <code>openid</code> always needs to be present and others can be added concatenating them with a <code>+</code> sign, for example <code>openid+profile+email</code>, <code>openid+email+userDefinedScope</code>. The default is <code>openid</code>.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>redirectURI</code></td>
          <td style="text-align: left">Allows overriding the default redirect URI. The default is <code>/_codexch</code>.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>postLogoutRedirectURI</code></td>
          <td style="text-align: left">URI to redirect to after the logout has been performed. Requires <code>endSessionEndpoint</code>. The default is <code>/_logout</code>.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>zoneSyncLeeway</code></td>
          <td style="text-align: left">Specifies the maximum timeout in milliseconds for synchronizing ID/access tokens and shared values between Ingress Controller pods. The default is <code>200</code>.</td>
          <td style="text-align: left"><code>int</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>accessTokenEnable</code></td>
          <td style="text-align: left">Option of whether Bearer token is used to authorize NGINX to access protected backend.</td>
          <td style="text-align: left"><code>boolean</code></td>
          <td style="text-align: left">No</td>
      </tr>
  </tbody>
</table>
</div>
<blockquote class="note">
  <div><strong>Note:</strong><br/> Only one OIDC policy can be referenced in a VirtualServer and its VirtualServerRoutes. However, the same policy can still be applied to different routes in the VirtualServer and VirtualServerRoutes.</div>
</blockquote>

<h4 
id="oidc-merging-behavior">OIDC Merging Behavior  <a class="headerlink float-right" href="#oidc-merging-behavior" title="OIDC Merging Behavior"><i class="fas fa-link fa-xs"></i></a>
</h4><p>A VirtualServer/VirtualServerRoute can reference only a single OIDC policy. Every subsequent reference will be ignored. For example, here we reference two policies:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">policies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">oidc-policy-one</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">oidc-policy-two</span><span class="w">
</span></span></span></code></pre></div><p>In this example NGINX Ingress Controller will use the configuration from the first policy reference <code>oidc-policy-one</code>, and ignores <code>oidc-policy-two</code>.</p>
<h2 
id="using-policy">Using Policy  <a class="headerlink float-right" href="#using-policy" title="Using Policy"><i class="fas fa-link fa-xs"></i></a>
</h2><p>You can use the usual <code>kubectl</code> commands to work with Policy resources, just as with built-in Kubernetes resources.</p>
<p>For example, the following command creates a Policy resource defined in <code>access-control-policy-allow.yaml</code> with the name <code>webapp-policy</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">kubectl apply -f access-control-policy-allow.yaml
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">policy.k8s.nginx.org/webapp-policy configured
</span></span></code></pre></div><p>You can get the resource by running:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">kubectl get policy webapp-policy
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">NAME            AGE
</span></span><span class="line"><span class="cl">webapp-policy   27m
</span></span></code></pre></div><p>For <code>kubectl get</code> and similar commands, you can also use the short name <code>pol</code> instead of <code>policy</code>.</p>
<h3 
id="waf">WAF  <a class="headerlink float-right" href="#waf" title="WAF"><i class="fas fa-link fa-xs"></i></a>
</h3><blockquote class="note">
  <div><strong>Note:</strong><br/> The feature is implemented using the NGINX Plus <a href="https://docs.nginx.com/nginx-app-protect/configuration/" target="_blank" rel="noopener">NGINX App Protect WAF Module</a>.</div>
</blockquote>

<p>The WAF policy configures NGINX Plus to secure client requests using App Protect WAF policies.</p>
<p>For example, the following policy will enable the referenced APPolicy. You can configure multiple APLogConfs with log destinations:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">waf</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">apPolicy</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;default/dataguard-alarm&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">securityLogs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">apLogConf</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;default/logconf&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">logDest</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;syslog:server=syslog-svc.default:514&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">apLogConf</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;default/logconf&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">logDest</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;syslog:server=syslog-svc-secondary.default:514&#34;</span><span class="w">
</span></span></span></code></pre></div><blockquote class="note">
  <div><strong>Note:</strong><br/> The field <code>waf.securityLog</code> is deprecated and will be removed in future releases.It will be ignored if <code>waf.securityLogs</code> is populated.</div>
</blockquote>

<style>
    table, th, td {
      border: 1px solid #CCC;
      border-collapse: collapse;
      list-style-position: inside;
    }
    th, td {
      padding: 5px;
    }
    th {
      text-align: center;
    }
</style>
<div style="width:100%;overflow-x:scroll;display:block;">
<table>
  <thead>
      <tr>
          <th style="text-align: left">Field</th>
          <th style="text-align: left">Description</th>
          <th style="text-align: left">Type</th>
          <th style="text-align: left">Required</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>enable</code></td>
          <td style="text-align: left">Enables NGINX App Protect WAF.</td>
          <td style="text-align: left"><code>bool</code></td>
          <td style="text-align: left">Yes</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>apPolicy</code></td>
          <td style="text-align: left">The <a href="/nginx-ingress-controller/installation/integrations/app-protect-waf/configuration/#waf-policies">App Protect WAF policy</a> of the WAF. Accepts an optional namespace. Mutually exclusive with <code>apBundle</code>.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>apBundle</code></td>
          <td style="text-align: left">The <a href="/nginx-ingress-controller/installation/integrations/app-protect-waf/configuration/#waf-bundles">App Protect WAF policy bundle</a>. Mutually exclusive with <code>apPolicy</code>.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>securityLog.enable</code></td>
          <td style="text-align: left">Enables security log.</td>
          <td style="text-align: left"><code>bool</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>securityLog.apLogConf</code></td>
          <td style="text-align: left">The <a href="/nginx-ingress-controller/installation/integrations/app-protect-waf/configuration/#waf-logs">App Protect WAF log conf</a> resource. Accepts an optional namespace. Only works with <code>apPolicy</code>.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>securityLog.apLogBundle</code></td>
          <td style="text-align: left">The <a href="/nginx-ingress-controller/installation/integrations/app-protect-waf/configuration/#waf-bundles">App Protect WAF log bundle</a> resource. Only works with <code>apBundle</code>.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>securityLog.logDest</code></td>
          <td style="text-align: left">The log destination for the security log. Accepted variables are <code>syslog:server=&lt;ip-address &amp;#124; localhost; fqdn&gt;:&lt;port&gt;</code>, <code>stderr</code>, <code>&lt;absolute path to file&gt;</code>. Default is <code>&quot;syslog:server=127.0.0.1:514&quot;</code>.</td>
          <td style="text-align: left"><code>string</code></td>
          <td style="text-align: left">No</td>
      </tr>
  </tbody>
</table>
</div>
<h4 
id="waf-merging-behavior">WAF Merging Behavior  <a class="headerlink float-right" href="#waf-merging-behavior" title="WAF Merging Behavior"><i class="fas fa-link fa-xs"></i></a>
</h4><p>A VirtualServer/VirtualServerRoute can reference multiple WAF policies. However, only one can be applied. Every subsequent reference will be ignored. For example, here we reference two policies:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">policies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">waf-policy-one</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">waf-policy-two</span><span class="w">
</span></span></span></code></pre></div><p>In this example NGINX Ingress Controller will use the configuration from the first policy reference <code>waf-policy-one</code>, and ignores <code>waf-policy-two</code>.</p>
<h3 
id="applying-policies">Applying Policies  <a class="headerlink float-right" href="#applying-policies" title="Applying Policies"><i class="fas fa-link fa-xs"></i></a>
</h3><p>You can apply policies to both VirtualServer and VirtualServerRoute resources. For example:</p>
<ul>
<li>
<p>VirtualServer:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">k8s.nginx.org/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">VirtualServer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">cafe</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">cafe</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l">cafe.example.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tls</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">secret</span><span class="p">:</span><span class="w"> </span><span class="l">cafe-secret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">policies</span><span class="p">:</span><span class="w"> </span><span class="c"># spec policies</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">policy1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">upstreams</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">coffee</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">coffee-svc</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">routes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/tea</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">policies</span><span class="p">:</span><span class="w"> </span><span class="c"># route policies</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">policy2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">cafe</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">route</span><span class="p">:</span><span class="w"> </span><span class="l">tea/tea</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/coffee</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">policies</span><span class="p">:</span><span class="w"> </span><span class="c"># route policies</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">policy3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">cafe</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">action</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">pass</span><span class="p">:</span><span class="w"> </span><span class="l">coffee</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="l">```</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">For VirtualServer, you can apply a policy</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>*<span class="w"> </span><span class="l">to all routes (spec policies)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>*<span class="w"> </span><span class="l">to a specific route (route policies)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="l">Route policies of the *same type* override spec policies. In the example above, if the type of the policies `policy-1` and `policy-3` is `accessControl`, then for requests to `cafe.example.com/coffee`, NGINX will apply `policy-3`.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">The overriding is enforced by NGINX</span><span class="p">:</span><span class="w"> </span><span class="l">the spec policies are implemented in the `server` context of the config, and the route policies are implemented in the `location` context. As a result, the route policies of the same type win.</span><span class="w">
</span></span></span></code></pre></div></li>
<li>
<p>VirtualServerRoute, which is referenced by the VirtualServer above:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">k8s.nginx.org/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">VirtualServerRoute</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">tea</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">tea</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l">cafe.example.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">upstreams</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">tea</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">tea-svc</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">subroutes</span><span class="p">:</span><span class="w"> </span><span class="c"># subroute policies</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/tea</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">policies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">policy4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">tea</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">action</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">pass</span><span class="p">:</span><span class="w"> </span><span class="l">tea</span><span class="w">
</span></span></span></code></pre></div><p>For VirtualServerRoute, you can apply a policy to a subroute (subroute policies).</p>
<p>Subroute policies of the same type override spec policies. In the example above, if the type of the policies <code>policy-1</code> (in the VirtualServer) and <code>policy-4</code> is <code>accessControl</code>, then for requests to <code>cafe.example.com/tea</code>, NGINX will apply <code>policy-4</code>. As with the VirtualServer, the overriding is enforced by NGINX.</p>
<p>Subroute policies always override route policies no matter the types. For example, the policy <code>policy-2</code> in the VirtualServer route will be ignored for the subroute <code>/tea</code>, because the subroute has its own policies (in our case, only one policy <code>policy4</code>). If the subroute didn&rsquo;t have any policies, then the <code>policy-2</code> would be applied. This overriding is enforced by NGINX Ingress Controller &ndash; the <code>location</code> context for the subroute will either have route policies or subroute policies, but not both.</p>
</li>
</ul>
<h3 
id="invalid-policies">Invalid Policies  <a class="headerlink float-right" href="#invalid-policies" title="Invalid Policies"><i class="fas fa-link fa-xs"></i></a>
</h3><p>NGINX will treat a policy as invalid if one of the following conditions is met:</p>
<ul>
<li>The policy doesn&rsquo;t pass the <a href="#comprehensive-validation">comprehensive validation</a>.</li>
<li>The policy isn&rsquo;t present in the cluster.</li>
<li>The policy doesn&rsquo;t meet its type-specific requirements. For example, an <code>ingressMTLS</code> policy requires TLS termination enabled in the VirtualServer.</li>
</ul>
<p>For an invalid policy, NGINX returns the 500 status code for client requests with the following rules:</p>
<ul>
<li>If a policy is referenced in a VirtualServer <code>route</code> or a VirtualServerRoute <code>subroute</code>, then NGINX will return the 500 status code for requests for the URIs of that route/subroute.</li>
<li>If a policy is referenced in the VirtualServer <code>spec</code>, then NGINX will return the 500 status code for requests for all URIs of that VirtualServer.</li>
</ul>
<p>If a policy is invalid, the VirtualServer or VirtualServerRoute will have the <a href="/nginx-ingress-controller/configuration/global-configuration/reporting-resources-status#virtualserver-and-virtualserverroute-resources">status</a> with the state <code>Warning</code> and the message explaining why the policy wasn&rsquo;t considered invalid.</p>
<h3 
id="validation">Validation  <a class="headerlink float-right" href="#validation" title="Validation"><i class="fas fa-link fa-xs"></i></a>
</h3><p>Two types of validation are available for the Policy resource:</p>
<ul>
<li><em>Structural validation</em>, done by <code>kubectl</code> and the Kubernetes API server.</li>
<li><em>Comprehensive validation</em>, done by NGINX Ingress Controller.</li>
</ul>
<h4 
id="structural-validation">Structural Validation  <a class="headerlink float-right" href="#structural-validation" title="Structural Validation"><i class="fas fa-link fa-xs"></i></a>
</h4><p>The custom resource definition for the Policy includes a structural OpenAPI schema, which describes the type of every field of the resource.</p>
<p>If you try to create (or update) a resource that violates the structural schema &ndash; for example, the resource uses a string value instead of an array of strings in the <code>allow</code> field &ndash; <code>kubectl</code> and the Kubernetes API server will reject the resource.</p>
<ul>
<li>
<p>Example of <code>kubectl</code> validation:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">kubectl apply -f access-control-policy-allow.yaml
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">error: error validating <span class="s2">&#34;access-control-policy-allow.yaml&#34;</span>: error validating data: ValidationError<span class="o">(</span>Policy.spec.accessControl.allow<span class="o">)</span>: invalid <span class="nb">type</span> <span class="k">for</span> org.nginx.k8s.v1.Policy.spec.accessControl.allow: got <span class="s2">&#34;string&#34;</span>, expected <span class="s2">&#34;array&#34;</span><span class="p">;</span> <span class="k">if</span> you choose to ignore these errors, turn validation off with --validate<span class="o">=</span><span class="nb">false</span>
</span></span></code></pre></div></li>
<li>
<p>Example of Kubernetes API server validation:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">kubectl apply -f access-control-policy-allow.yaml --validate<span class="o">=</span><span class="nb">false</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">The Policy <span class="s2">&#34;webapp-policy&#34;</span> is invalid: spec.accessControl.allow: Invalid value: <span class="s2">&#34;string&#34;</span>: spec.accessControl.allow in body must be of <span class="nb">type</span> array: <span class="s2">&#34;string&#34;</span>
</span></span></code></pre></div></li>
</ul>
<p>If a resource passes structural validation, then NGINX Ingress Controller&rsquo;s comprehensive validation runs.</p>
<h4 
id="comprehensive-validation">Comprehensive Validation  <a class="headerlink float-right" href="#comprehensive-validation" title="Comprehensive Validation"><i class="fas fa-link fa-xs"></i></a>
</h4><p>NGINX Ingress Controller validates the fields of a Policy resource. If a resource is invalid, NGINX Ingress Controller will reject it. The resource will continue to exist in the cluster, but NGINX Ingress Controller will ignore it.</p>
<p>You can use <code>kubectl</code> to check whether or not NGINX Ingress Controller successfully applied a Policy configuration. For our example <code>webapp-policy</code> Policy, we can run:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">kubectl describe pol webapp-policy
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">. . .
</span></span><span class="line"><span class="cl">Events:
</span></span><span class="line"><span class="cl">  Type    Reason          Age   From                      Message
</span></span><span class="line"><span class="cl">  ----    ------          ----  ----                      -------
</span></span><span class="line"><span class="cl">  Normal  AddedOrUpdated  11s   nginx-ingress-controller  Policy default/webapp-policy was added or updated
</span></span></code></pre></div><p>Note how the events section includes a Normal event with the AddedOrUpdated reason that informs us that the configuration was successfully applied.</p>
<p>If you create an invalid resource, NGINX Ingress Controller will reject it and emit a Rejected event. For example, if you create a Policy <code>webapp-policy</code> with an invalid IP <code>10.0.0.</code> in the <code>allow</code> field, you will get:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">kubectl describe policy webapp-policy
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">. . .
</span></span><span class="line"><span class="cl">Events:
</span></span><span class="line"><span class="cl">  Type     Reason    Age   From                      Message
</span></span><span class="line"><span class="cl">  ----     ------    ----  ----                      -------
</span></span><span class="line"><span class="cl">  Warning  Rejected  7s    nginx-ingress-controller  Policy default/webapp-policy is invalid and was rejected: spec.accessControl.allow<span class="o">[</span>0<span class="o">]</span>: Invalid value: <span class="s2">&#34;10.0.0.&#34;</span>: must be a CIDR or IP
</span></span></code></pre></div><p>Note how the events section includes a Warning event with the Rejected reason.</p>
<p>Additionally, this information is also available in the <code>status</code> field of the Policy resource. Note the Status section of the Policy:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">kubectl describe pol webapp-policy
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">. . .
</span></span><span class="line"><span class="cl">Status:
</span></span><span class="line"><span class="cl">  Message:  Policy default/webapp-policy is invalid and was rejected: spec.accessControl.allow<span class="o">[</span>0<span class="o">]</span>: Invalid value: <span class="s2">&#34;10.0.0.&#34;</span>: must be a CIDR or IP
</span></span><span class="line"><span class="cl">  Reason:   Rejected
</span></span><span class="line"><span class="cl">  State:    Invalid
</span></span></code></pre></div><p><strong>Note</strong>: If you make an existing resource invalid, NGINX Ingress Controller will reject it.</p>

    
  <hr>
    

	
<div class="container flex">
	<ul class="next-prev-icon">

		
		
		<li style="flex:1; text-align: left; white-space: nowrap;"><a href="https://docs.nginx.com/nginx-ingress-controller/configuration/configuration-examples/" class="" title="Previous -- Configuration examples "><svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M23.378 46.5L1.94 25.06C1.80067 24.9209 1.69014 24.7556 1.61472 24.5738C1.53931 24.3919 1.50049 24.1969 1.50049 24C1.50049 23.8031 1.53931 23.6081 1.61472 23.4262C1.69014 23.2444 1.80067 23.0791 1.94 22.94L23.378 1.5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M45.878 46.5L24.44 25.06C24.3007 24.9209 24.1901 24.7556 24.1147 24.5738C24.0393 24.3919 24.0005 24.1969 24.0005 24C24.0005 23.8031 24.0393 23.6081 24.1147 23.4262C24.1901 23.2444 24.3007 23.0791 24.44 22.94L45.878 1.5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a></li>
		

		
			<li style="flex:1; text-align: right; white-space: nowrap;"><a href="https://docs.nginx.com/nginx-ingress-controller/configuration/transportserver-resource/" class="" title="Next -- TransportServer resources"><svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M24.622 1.5L46.06 22.94C46.1993 23.0791 46.3099 23.2444 46.3853 23.4262C46.4607 23.6081 46.4995 23.8031 46.4995 24C46.4995 24.1969 46.4607 24.3919 46.3853 24.5738C46.3099 24.7556 46.1993 24.9209 46.06 25.06L24.622 46.5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M2.122 1.5L23.56 22.94C23.6993 23.0791 23.8099 23.2444 23.8853 23.4262C23.9607 23.6081 23.9995 23.8031 23.9995 24C23.9995 24.1969 23.9607 24.3919 23.8853 24.5738C23.8099 24.7556 23.6993 24.9209 23.56 25.06L2.122 46.5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a></li>
		
		</ul>
	</div>

    
  </main>
  
    
      <div class="col-md-3 d-none d-xl-block d-print-none nginx-toc align-top" style="width: 25%;">
      <nav class="bd-links" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <h3 class="bd-toc-link">What's on This Page</h3>
    
      
        <nav id="TableOfContents">
  <ul>
    <li><a href="#prerequisites">Prerequisites</a></li>
    <li><a href="#policy-specification">Policy Specification</a>
      <ul>
        <li><a href="#accesscontrol">AccessControl</a></li>
        <li><a href="#ratelimit">RateLimit</a></li>
        <li><a href="#apikey">APIKey</a></li>
        <li><a href="#basicauth">BasicAuth</a></li>
        <li><a href="#jwt-using-local-kubernetes-secret">JWT Using Local Kubernetes Secret</a></li>
        <li><a href="#jwt-using-jwks-from-remote-location">JWT Using JWKS From Remote Location</a></li>
        <li><a href="#ingressmtls">IngressMTLS</a></li>
        <li><a href="#egressmtls">EgressMTLS</a></li>
        <li><a href="#oidc">OIDC</a></li>
      </ul>
    </li>
    <li><a href="#using-policy">Using Policy</a>
      <ul>
        <li><a href="#waf">WAF</a></li>
        <li><a href="#applying-policies">Applying Policies</a></li>
        <li><a href="#invalid-policies">Invalid Policies</a></li>
        <li><a href="#validation">Validation</a></li>
      </ul>
    </li>
  </ul>
</nav>
      
    
  </div>
</nav>
      </div>
    
  
</div>





  </div>

  <footer>

    
    <footer id="footer">
   <div class="container-fluid">

       <div class="row align-items-center">

         <div class="col-md-6 d-md-flex">
             <img class="nginx-logo-footer" src="https://docs.nginx.com/images/icons/NGINX-Part-of-F5-horiz-all-white-525x208@2x.png"/>
         </div>

         
         <div class="col-md d-flex footer-text">
           <div class="col-xl d-none d-md-block align-self-center text-semibold align-right">
             <span>Found a bug? Looking for something new?</span>
           </div>
           <div class="col-lg d-none d-md-block pl-0">
             <button class="button footer-button"><a href="https://docs.nginx.com/feedback/" alt="Select if you have feedback">Let Us Know</a></button>
           </div>
         </div>
         

       </div>


       
       <div class="row d-print-none d-none d-md-flex">
         <div class="col-md-3 d-none d-md-block">
           <span class="footer-head">Company</span>
           <ul class="footer-text">
             <li><a href="https://www.f5.com/go/product/welcome-to-nginx" target="_blank" alt="Select to learn about F5 NGINX">About F5 NGINX</a></li>
             <li><a href="https://www.f5.com/company/events" target="_blank" alt="Select to learn about F5 events">Events</a></li>
           </ul>
           <br />
           <span class="footer-head">Resources</span>
           <ul class="footer-text">
             <li><a href="https://www.f5.com/company/blog/nginx" target="_blank" alt="Select to visit the F5 NGINX blog" >Blog</a></li>
             <li><a href="https://www.f5.com/go/faq/nginx-faq" target="_blank" alt="Select to visit the F5 NGINX frequently asked questions page" >FAQ</a></li>
             <li><a href="https://www.f5.com/services" target="_blank" alt="Select to learn about F5 NGINX Support">Professional Services</a></li>
             <li><a href="https://www.f5.com/learn/training" target="_blank" alt="Select to learn about F5 training offerings" >Training</a></li>
           </ul>
         </div>

         <div class="col-md-3 d-none d-md-block">
           <span class="footer-head">Products</span>
             <ul class="footer-text">
                 <li><a title="F5 NGINX Plus" aria-label="F5 NGINX Plus" href="https://www.f5.com/products/nginx/nginx-plus">F5 NGINX Plus</a></li>
                 <li><a title="F5 NGINX App Protect" aria-label="F5 NGINX App Protect" href="https://www.f5.com/products/nginx/nginx-app-protect">F5 NGINX App Protect</a></li>
                 <li><a title="F5 NGINX Instance Manager" aria-label="F5 NGINX Instance Manager" href="https://www.f5.com/products/nginx/instance-manager">F5 NGINX Instance Manager</a></li>
                 <li><a title="F5 NGINX Ingress Controller" aria-label="F5 NGINX Ingress Controller" href="https://www.f5.com/products/nginx/nginx-ingress-controller">F5 NGINX Ingress Controller</a></li>
                 <li><a title="F5 NGINX Gateway Fabric" aria-label="F5 NGINX Gateway Fabric" href="https://www.f5.com/products/nginx/nginx-gateway-fabric">F5 NGINX Gateway Fabric</a></li>
                 <li><a title="F5 NGINXaaS for Azure" aria-label="F5 NGINXaaS for Azure" href="https://www.f5.com/products/nginx/f5-nginxaas-for-azure">F5 NGINXaaS for Azure</a></li>
             </ul>
         </div>

         <div class="col-md-3 d-none d-md-block">
           <span class="footer-head">NGINX on GitHub</span>
           <ul class="footer-text">
             <li><a title="NGINX Open Source" aria-label="NGINX Open Source" href="https://github.com/nginx/nginx"><span class="inner">NGINX Open Source</span></a></li>
             <li><a title="NGINX Unit" aria-label="NGINX Unit" href="https://github.com/nginx/unit"><span class="inner">NGINX Unit</span></a></li>
             <li><a title="NGINX Amplify" aria-label="NGINX Amplify" href="https://github.com/nginxinc/nginx-amplify-agent"><span class="inner">NGINX Amplify</span></a></li>
             <li><a title="NGINX Agent" aria-label="NGINX Agent" href="https://github.com/nginx/Agent"><span class="inner">NGINX Agent</span></a></li>
             <li><a title="NGINX Kubernetes Ingress Controller" aria-label="NGINX Kubernetes Ingress Controller" href="https://github.com/nginxinc/kubernetes-ingress"><span class="inner">NGINX Kubernetes Ingress Controller</span></a></li>
             <li><a title="NGINX Gateway Fabric" aria-label="NGINX Gateway Fabric" href="https://github.com/nginxinc/nginx-gateway-fabric"><span class="inner">NGINX Gateway Fabric</span></a></li>
         </ul>
         </div>

         <div class="col-md-2 d-none d-md-block">
           <span class="footer-head">Social</span>
               <ul class="footer-social">
                 <li><a href="https://www.facebook.com/nginxinc" title="facebook" aria-label="facebook" target="_blank" rel="noreferrer"><i class="fa-brands fa-facebook" aria-hidden="true"></i>
                  </a></li>
                 <li><a href="https://twitter.com/nginx" title="X" aria-label="x" target="_blank" rel="noreferrer"><i class="fa-brands fa-x-twitter" aria-hidden="true"></i></a></li>
                 <li><a href="https://www.linkedin.com/company/nginx" title="linkedin" aria-label="linkedin" target="_blank" rel="noreferrer"><i class="fa-brands fa-linkedin" aria-hidden="true"></i>
                  </a></li>
                 <li><a href="https://www.youtube.com/user/NginxInc" title="youtube" aria-label="youtube" target="_blank" rel="noreferrer" alt="NGINX Youtube Channel"><i class="fa-brands fa-square-youtube" aria-hidden="true"></i>
                  </a></li>
               </ul>
         </div>
       </div>
       
       <div class="site-info footer-text">

           <div class="text-center">
           <p><a href="https://www.f5.com/"><img class="f5-logo-footer" src="https://docs.nginx.com/images/icons/Logo_F5.svg" alt="F5 logo"></a>
              ©2024 F5, Inc. All rights reserved.</p><p><a href="https://www.f5.com/company/policies/trademarks" rel="noopener" target="_blank">Trademarks</a>  <a href="https://www.f5.com/company/policies" rel="noopener" target="_blank">Policies</a> <a href="https://docs.nginx.com/ossc">Open Source Components</a>  <a href="https://www.f5.com/company/policies/privacy-notice" rel="noopener" target="_blank">Privacy</a>  <a href="https://www.f5.com/company/policies/F5-California-privacy-summary" rel="noopener" target="_blank">California Privacy</a>  <a href="https://www.f5.com/company/policies/privacy-notice#no-sell" rel="noopener" target="_blank">Do Not Sell My Personal Information</a>  <span id="teconsent"></span></p>
           </div>

       </div>
   </div>
</footer>

    

  </footer>


<script src="/nginx-ingress-controller/js/jquery-3-6-4.min.js" type="text/javascript" integrity=""></script>


<script src="/nginx-ingress-controller/js/kube.min.a3a07cceb64989e2f0bf41653ab4d8346ba4312270eb5cc80d6afad3bf30a0ca9768aaa2559cb582e663332c541edab6a4068ef2e88b739fa425e2e870eb0aff.js" type="text/javascript" integrity="sha512-o6B8zrZJieLwv0FlOrTYNGukMSJw61zIDWr6078woMqXaKqiVZy1guZjMyxUHtq2pAaO8uiLc5&#43;kJeLocOsK/w=="></script>



<script src="/nginx-ingress-controller/js/bootstrap.bundle.min.c15ed88f56a52190ea645094409cbce5537eaaf108972f777c840037b8aa0c508f12e70b09e345cf8af7e450a8f6ce96ae974340f8bcd316e58d707c063b6f72.js" type="text/javascript" integrity="sha512-wV7Yj1alIZDqZFCUQJy85VN&#43;qvEIly93fIQAN7iqDFCPEucLCeNFz4r35FCo9s6WrpdDQPi80xbljXB8Bjtvcg=="></script>



<script src="/nginx-ingress-controller/js/code-copy.b424b9cf3f8a69320d1a74e5b4345962141999ae58795c39fb9c5ac8953f3aef3373d7a334971f578e4dc4ee212cbe8f42951d16edb285e6a7931634998d900c.js" type="text/javascript" ></script>





<script class="coveo-script" src="https://static.cloud.coveo.com/searchui/v2.10104/0/js/CoveoJsSearch.Lazy.min.js" integrity="sha512-HxdDBIp5snbqtu1TPkBnXLKEvN9IPz3PeZW8zT9KfsflV9Ck822XDroDlpVbfCfXeiu8C0RDVn0fdu7aGy/H1g==" crossorigin="anonymous"></script>

<script src="https://static.cloud.coveo.com/searchui/v2.10104/0/js/templates/templates.js" integrity="sha512-CR0Yk/LIwgh1MsKqjecDp/r6F9ipKc6gA+4+E1pplT3N3r1pk+la/HaqyDiKtjOFwrwIIbIYBFrUJgPql93QHw==" crossorigin="anonymous"></script>






<script src="/nginx-ingress-controller/js/coveo.min.6e0e2c15ea8204cc128d34f0e7e13d16783166196b052d33cb05ec26a38415801ab03141a36256976745037faedb2da32dd8f3600b92b5f3c7d22fa634b0624f.js" integrity="sha512-bg4sFeqCBMwSjTTw5&#43;E9FngxZhlrBS0zywXsJqOEFYAasDFBo2JWl2dFA3&#43;u2y2jLdjzYAuStfPH0i&#43;mNLBiTw==" type="text/javascript"></script>






  
  

  
  





<script src="/nginx-ingress-controller/js/sidebar.min.89a78ac76492f78b44370cf6bbaa09457606d00a4b14db603de939e128451bf31bd29e46c179fbc3a1d632302f5ebfe61c5b9e65e2c171acd4981185cd3329b6.js" type="text/javascript" integrity="sha512-iaeKx2SS94tENwz2u6oJRXYG0ApLFNtgPek54ShFG/Mb0p5GwXn7w6HWMjAvXr/mHFueZeLBcazUmBGFzTMptg=="></script>
 
<div id="consent_blackbar" style="position:fixed;top:0px;width:100%"></div>
</body>
</html>


